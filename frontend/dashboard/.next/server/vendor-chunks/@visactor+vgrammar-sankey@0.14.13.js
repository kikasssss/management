"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@visactor+vgrammar-sankey@0.14.13";
exports.ids = ["vendor-chunks/@visactor+vgrammar-sankey@0.14.13"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/format.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/format.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatLinkPath: () => (/* binding */ formatLinkPath),\n/* harmony export */   formatLinkPolygon: () => (/* binding */ formatLinkPolygon),\n/* harmony export */   formatNodeRect: () => (/* binding */ formatNodeRect),\n/* harmony export */   getAlignEndTexts: () => (/* binding */ getAlignEndTexts),\n/* harmony export */   getAlignStartTexts: () => (/* binding */ getAlignStartTexts),\n/* harmony export */   getBoundsOfNodes: () => (/* binding */ getBoundsOfNodes)\n/* harmony export */ });\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isNil.js\");\n\n\nconst formatNodeRect = nodes => nodes.map((node => Object.assign({}, node, {\n    x: node.x0,\n    y: node.y0,\n    width: node.x1 - node.x0,\n    height: node.y1 - node.y0\n})));\n\nconst formatLinkPolygon = links => {\n    var _a;\n    return !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(null === (_a = null == links ? void 0 : links[0]) || void 0 === _a ? void 0 : _a.vertical) ? links.map((link => {\n        const half = link.thickness / 2, points = [ {\n            x: link.x0 - half,\n            y: link.y0\n        }, {\n            x: link.x1 - half,\n            y: link.y1\n        }, {\n            x: link.x1 + half,\n            y: link.y1\n        }, {\n            x: link.x0 + half,\n            y: link.y0\n        } ];\n        return Object.assign({}, link, {\n            points: points\n        });\n    })) : links.map((link => {\n        const half = link.thickness / 2, points = [ {\n            x: link.x0,\n            y: link.y0 - half\n        }, {\n            x: link.x1,\n            y: link.y1 - half\n        }, {\n            x: link.x1,\n            y: link.y1 + half\n        }, {\n            x: link.x0,\n            y: link.y0 + half\n        } ];\n        return Object.assign({}, link, {\n            points: points\n        });\n    }));\n};\n\nconst formatLinkPath = (links, round = !0) => {\n    var _a;\n    return !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(null === (_a = null == links ? void 0 : links[0]) || void 0 === _a ? void 0 : _a.vertical) ? links.map((link => {\n        const half = link.thickness / 2;\n        let y0 = link.y0, y1 = link.y1, midY = (y0 + y1) / 2, x00 = link.x0 - half, x01 = link.x0 + half, x10 = link.x1 - half, x11 = link.x1 + half;\n        return round && (y0 = Math.round(y0), y1 = Math.round(y1), midY = Math.round(midY), \n        x00 = Math.round(x00), x01 = Math.round(x01), x10 = Math.round(x10), x11 = Math.round(x11)), \n        Object.assign({}, link, {\n            path: `\\n            M${x00},${y0}\\n            C${x00},${midY},${x10},${midY},${x10},${y1}\\n            L${x11},${y1}\\n            C${x11},${midY},${x01},${midY},${x01},${y0}\\n            Z\\n            `\n        });\n    })) : links.map((link => {\n        const half = link.thickness / 2;\n        let x0 = link.x0, x1 = link.x1, midX = (x0 + x1) / 2, y00 = link.y0 - half, y01 = link.y0 + half, y10 = link.y1 - half, y11 = link.y1 + half;\n        return round && (x0 = Math.round(x0), x1 = Math.round(x1), midX = Math.round(midX), \n        y00 = Math.round(y00), y01 = Math.round(y01), y10 = Math.round(y10), y11 = Math.round(y11)), \n        Object.assign({}, link, {\n            path: `\\n          M${x0},${y00}\\n          C${midX},${y00},${midX},${y10},${x1},${y10}\\n          L${x1},${y11}\\n          C${midX},${y11},${midX},${y01},${x0},${y01}\\n          Z`\n        });\n    }));\n};\n\nconst getBoundsOfNodes = nodes => {\n    let x0 = 1 / 0, x1 = -1 / 0, y0 = 1 / 0, y1 = -1 / 0;\n    return nodes.forEach((node => {\n        x0 = Math.min(node.x0, x0), x1 = Math.max(node.x1, x1), y0 = Math.min(node.y0, y0), \n        y1 = Math.max(node.y1, y1);\n    })), {\n        x0: x0,\n        x1: x1,\n        y0: y0,\n        y1: y1,\n        width: x1 - x0,\n        height: y1 - y0\n    };\n};\n\nconst isNodeVertical = node => node.sourceLinks && node.sourceLinks.length ? !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(node.sourceLinks[0].x0) : !(!node.targetLinks || !node.targetLinks.length) && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(node.targetLinks[0].x0);\n\nconst getAlignStartTexts = (nodes, offset = 0) => isNodeVertical(nodes[0]) ? nodes.map((node => ({\n    y: node.y1,\n    x: (node.x0 + node.x1) / 2,\n    datum: node.datum,\n    key: node.key\n}))) : nodes.map((node => ({\n    x: node.x1,\n    y: (node.y0 + node.y1) / 2,\n    datum: node.datum,\n    key: node.key\n})));\n\nconst getAlignEndTexts = (nodes, offset = 0) => isNodeVertical(nodes[0]) ? nodes.map((node => ({\n    y: node.y1 - offset,\n    x: (node.x0 + node.x1) / 2,\n    datum: node.datum,\n    key: node.key\n}))) : nodes.map((node => ({\n    x: node.x0 - offset,\n    y: (node.y0 + node.y1) / 2,\n    datum: node.datum,\n    key: node.key\n})));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL2Zvcm1hdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXlDOztBQUVsQyxtRUFBbUU7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVNO0FBQ1A7QUFDQSxZQUFZLDREQUFLO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVU7QUFDViwrQkFBK0I7QUFDL0I7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVU7QUFDViwrQkFBK0I7QUFDL0I7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMOztBQUVPO0FBQ1A7QUFDQSxZQUFZLDREQUFLO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCLG9DQUFvQyxJQUFJLEdBQUcsR0FBRyxpQkFBaUIsSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLEdBQUcsS0FBSyxHQUFHLElBQUksR0FBRyxHQUFHLGlCQUFpQixJQUFJLEdBQUcsR0FBRyxpQkFBaUIsSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLEdBQUcsS0FBSyxHQUFHLElBQUksR0FBRyxHQUFHO0FBQzNMLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIsa0NBQWtDLEdBQUcsR0FBRyxJQUFJLGVBQWUsS0FBSyxHQUFHLElBQUksR0FBRyxLQUFLLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLGVBQWUsR0FBRyxHQUFHLElBQUksZUFBZSxLQUFLLEdBQUcsSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUk7QUFDbkwsU0FBUztBQUNULEtBQUs7QUFDTDs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsOEVBQThFLDREQUFLLGdGQUFnRiw0REFBSzs7QUFFaks7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRU07QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXNhY3Rvci1uZXh0LXRlbXBsYXRlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B2aXNhY3Rvcit2Z3JhbW1hci1zYW5rZXlAMC4xNC4xMy9ub2RlX21vZHVsZXMvQHZpc2FjdG9yL3ZncmFtbWFyLXNhbmtleS9lcy9mb3JtYXQuanM/NmU0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc05pbCB9IGZyb20gXCJAdmlzYWN0b3IvdnV0aWxzXCI7XG5cbmV4cG9ydCBjb25zdCBmb3JtYXROb2RlUmVjdCA9IG5vZGVzID0+IG5vZGVzLm1hcCgobm9kZSA9PiBPYmplY3QuYXNzaWduKHt9LCBub2RlLCB7XG4gICAgeDogbm9kZS54MCxcbiAgICB5OiBub2RlLnkwLFxuICAgIHdpZHRoOiBub2RlLngxIC0gbm9kZS54MCxcbiAgICBoZWlnaHQ6IG5vZGUueTEgLSBub2RlLnkwXG59KSkpO1xuXG5leHBvcnQgY29uc3QgZm9ybWF0TGlua1BvbHlnb24gPSBsaW5rcyA9PiB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAhaXNOaWwobnVsbCA9PT0gKF9hID0gbnVsbCA9PSBsaW5rcyA/IHZvaWQgMCA6IGxpbmtzWzBdKSB8fCB2b2lkIDAgPT09IF9hID8gdm9pZCAwIDogX2EudmVydGljYWwpID8gbGlua3MubWFwKChsaW5rID0+IHtcbiAgICAgICAgY29uc3QgaGFsZiA9IGxpbmsudGhpY2tuZXNzIC8gMiwgcG9pbnRzID0gWyB7XG4gICAgICAgICAgICB4OiBsaW5rLngwIC0gaGFsZixcbiAgICAgICAgICAgIHk6IGxpbmsueTBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeDogbGluay54MSAtIGhhbGYsXG4gICAgICAgICAgICB5OiBsaW5rLnkxXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHg6IGxpbmsueDEgKyBoYWxmLFxuICAgICAgICAgICAgeTogbGluay55MVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB4OiBsaW5rLngwICsgaGFsZixcbiAgICAgICAgICAgIHk6IGxpbmsueTBcbiAgICAgICAgfSBdO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgbGluaywge1xuICAgICAgICAgICAgcG9pbnRzOiBwb2ludHNcbiAgICAgICAgfSk7XG4gICAgfSkpIDogbGlua3MubWFwKChsaW5rID0+IHtcbiAgICAgICAgY29uc3QgaGFsZiA9IGxpbmsudGhpY2tuZXNzIC8gMiwgcG9pbnRzID0gWyB7XG4gICAgICAgICAgICB4OiBsaW5rLngwLFxuICAgICAgICAgICAgeTogbGluay55MCAtIGhhbGZcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeDogbGluay54MSxcbiAgICAgICAgICAgIHk6IGxpbmsueTEgLSBoYWxmXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHg6IGxpbmsueDEsXG4gICAgICAgICAgICB5OiBsaW5rLnkxICsgaGFsZlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB4OiBsaW5rLngwLFxuICAgICAgICAgICAgeTogbGluay55MCArIGhhbGZcbiAgICAgICAgfSBdO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgbGluaywge1xuICAgICAgICAgICAgcG9pbnRzOiBwb2ludHNcbiAgICAgICAgfSk7XG4gICAgfSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGZvcm1hdExpbmtQYXRoID0gKGxpbmtzLCByb3VuZCA9ICEwKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAhaXNOaWwobnVsbCA9PT0gKF9hID0gbnVsbCA9PSBsaW5rcyA/IHZvaWQgMCA6IGxpbmtzWzBdKSB8fCB2b2lkIDAgPT09IF9hID8gdm9pZCAwIDogX2EudmVydGljYWwpID8gbGlua3MubWFwKChsaW5rID0+IHtcbiAgICAgICAgY29uc3QgaGFsZiA9IGxpbmsudGhpY2tuZXNzIC8gMjtcbiAgICAgICAgbGV0IHkwID0gbGluay55MCwgeTEgPSBsaW5rLnkxLCBtaWRZID0gKHkwICsgeTEpIC8gMiwgeDAwID0gbGluay54MCAtIGhhbGYsIHgwMSA9IGxpbmsueDAgKyBoYWxmLCB4MTAgPSBsaW5rLngxIC0gaGFsZiwgeDExID0gbGluay54MSArIGhhbGY7XG4gICAgICAgIHJldHVybiByb3VuZCAmJiAoeTAgPSBNYXRoLnJvdW5kKHkwKSwgeTEgPSBNYXRoLnJvdW5kKHkxKSwgbWlkWSA9IE1hdGgucm91bmQobWlkWSksIFxuICAgICAgICB4MDAgPSBNYXRoLnJvdW5kKHgwMCksIHgwMSA9IE1hdGgucm91bmQoeDAxKSwgeDEwID0gTWF0aC5yb3VuZCh4MTApLCB4MTEgPSBNYXRoLnJvdW5kKHgxMSkpLCBcbiAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgbGluaywge1xuICAgICAgICAgICAgcGF0aDogYFxcbiAgICAgICAgICAgIE0ke3gwMH0sJHt5MH1cXG4gICAgICAgICAgICBDJHt4MDB9LCR7bWlkWX0sJHt4MTB9LCR7bWlkWX0sJHt4MTB9LCR7eTF9XFxuICAgICAgICAgICAgTCR7eDExfSwke3kxfVxcbiAgICAgICAgICAgIEMke3gxMX0sJHttaWRZfSwke3gwMX0sJHttaWRZfSwke3gwMX0sJHt5MH1cXG4gICAgICAgICAgICBaXFxuICAgICAgICAgICAgYFxuICAgICAgICB9KTtcbiAgICB9KSkgOiBsaW5rcy5tYXAoKGxpbmsgPT4ge1xuICAgICAgICBjb25zdCBoYWxmID0gbGluay50aGlja25lc3MgLyAyO1xuICAgICAgICBsZXQgeDAgPSBsaW5rLngwLCB4MSA9IGxpbmsueDEsIG1pZFggPSAoeDAgKyB4MSkgLyAyLCB5MDAgPSBsaW5rLnkwIC0gaGFsZiwgeTAxID0gbGluay55MCArIGhhbGYsIHkxMCA9IGxpbmsueTEgLSBoYWxmLCB5MTEgPSBsaW5rLnkxICsgaGFsZjtcbiAgICAgICAgcmV0dXJuIHJvdW5kICYmICh4MCA9IE1hdGgucm91bmQoeDApLCB4MSA9IE1hdGgucm91bmQoeDEpLCBtaWRYID0gTWF0aC5yb3VuZChtaWRYKSwgXG4gICAgICAgIHkwMCA9IE1hdGgucm91bmQoeTAwKSwgeTAxID0gTWF0aC5yb3VuZCh5MDEpLCB5MTAgPSBNYXRoLnJvdW5kKHkxMCksIHkxMSA9IE1hdGgucm91bmQoeTExKSksIFxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCBsaW5rLCB7XG4gICAgICAgICAgICBwYXRoOiBgXFxuICAgICAgICAgIE0ke3gwfSwke3kwMH1cXG4gICAgICAgICAgQyR7bWlkWH0sJHt5MDB9LCR7bWlkWH0sJHt5MTB9LCR7eDF9LCR7eTEwfVxcbiAgICAgICAgICBMJHt4MX0sJHt5MTF9XFxuICAgICAgICAgIEMke21pZFh9LCR7eTExfSwke21pZFh9LCR7eTAxfSwke3gwfSwke3kwMX1cXG4gICAgICAgICAgWmBcbiAgICAgICAgfSk7XG4gICAgfSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEJvdW5kc09mTm9kZXMgPSBub2RlcyA9PiB7XG4gICAgbGV0IHgwID0gMSAvIDAsIHgxID0gLTEgLyAwLCB5MCA9IDEgLyAwLCB5MSA9IC0xIC8gMDtcbiAgICByZXR1cm4gbm9kZXMuZm9yRWFjaCgobm9kZSA9PiB7XG4gICAgICAgIHgwID0gTWF0aC5taW4obm9kZS54MCwgeDApLCB4MSA9IE1hdGgubWF4KG5vZGUueDEsIHgxKSwgeTAgPSBNYXRoLm1pbihub2RlLnkwLCB5MCksIFxuICAgICAgICB5MSA9IE1hdGgubWF4KG5vZGUueTEsIHkxKTtcbiAgICB9KSksIHtcbiAgICAgICAgeDA6IHgwLFxuICAgICAgICB4MTogeDEsXG4gICAgICAgIHkwOiB5MCxcbiAgICAgICAgeTE6IHkxLFxuICAgICAgICB3aWR0aDogeDEgLSB4MCxcbiAgICAgICAgaGVpZ2h0OiB5MSAtIHkwXG4gICAgfTtcbn07XG5cbmNvbnN0IGlzTm9kZVZlcnRpY2FsID0gbm9kZSA9PiBub2RlLnNvdXJjZUxpbmtzICYmIG5vZGUuc291cmNlTGlua3MubGVuZ3RoID8gIWlzTmlsKG5vZGUuc291cmNlTGlua3NbMF0ueDApIDogISghbm9kZS50YXJnZXRMaW5rcyB8fCAhbm9kZS50YXJnZXRMaW5rcy5sZW5ndGgpICYmICFpc05pbChub2RlLnRhcmdldExpbmtzWzBdLngwKTtcblxuZXhwb3J0IGNvbnN0IGdldEFsaWduU3RhcnRUZXh0cyA9IChub2Rlcywgb2Zmc2V0ID0gMCkgPT4gaXNOb2RlVmVydGljYWwobm9kZXNbMF0pID8gbm9kZXMubWFwKChub2RlID0+ICh7XG4gICAgeTogbm9kZS55MSxcbiAgICB4OiAobm9kZS54MCArIG5vZGUueDEpIC8gMixcbiAgICBkYXR1bTogbm9kZS5kYXR1bSxcbiAgICBrZXk6IG5vZGUua2V5XG59KSkpIDogbm9kZXMubWFwKChub2RlID0+ICh7XG4gICAgeDogbm9kZS54MSxcbiAgICB5OiAobm9kZS55MCArIG5vZGUueTEpIC8gMixcbiAgICBkYXR1bTogbm9kZS5kYXR1bSxcbiAgICBrZXk6IG5vZGUua2V5XG59KSkpO1xuXG5leHBvcnQgY29uc3QgZ2V0QWxpZ25FbmRUZXh0cyA9IChub2Rlcywgb2Zmc2V0ID0gMCkgPT4gaXNOb2RlVmVydGljYWwobm9kZXNbMF0pID8gbm9kZXMubWFwKChub2RlID0+ICh7XG4gICAgeTogbm9kZS55MSAtIG9mZnNldCxcbiAgICB4OiAobm9kZS54MCArIG5vZGUueDEpIC8gMixcbiAgICBkYXR1bTogbm9kZS5kYXR1bSxcbiAgICBrZXk6IG5vZGUua2V5XG59KSkpIDogbm9kZXMubWFwKChub2RlID0+ICh7XG4gICAgeDogbm9kZS54MCAtIG9mZnNldCxcbiAgICB5OiAobm9kZS55MCArIG5vZGUueTEpIC8gMixcbiAgICBkYXR1bTogbm9kZS5kYXR1bSxcbiAgICBrZXk6IG5vZGUua2V5XG59KSkpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/format.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/hierarchy.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/hierarchy.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateNodeValue: () => (/* binding */ calculateNodeValue)\n/* harmony export */ });\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isNil.js\");\n\n\nconst calculateNodeValue = subTree => {\n    let sum = 0;\n    return subTree.forEach(((node, index) => {\n        var _a;\n        (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(node.value) && ((null === (_a = node.children) || void 0 === _a ? void 0 : _a.length) ? node.value = calculateNodeValue(node.children) : node.value = 0), \n        sum += Math.abs(node.value);\n    })), sum;\n};\n//# sourceMappingURL=hierarchy.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL2hpZXJhcmNoeS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5Qzs7QUFFbEM7QUFDUDtBQUNBO0FBQ0E7QUFDQSxRQUFRLDREQUFLO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpc2FjdG9yLW5leHQtdGVtcGxhdGUvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL2hpZXJhcmNoeS5qcz83ZWQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzTmlsIH0gZnJvbSBcIkB2aXNhY3Rvci92dXRpbHNcIjtcblxuZXhwb3J0IGNvbnN0IGNhbGN1bGF0ZU5vZGVWYWx1ZSA9IHN1YlRyZWUgPT4ge1xuICAgIGxldCBzdW0gPSAwO1xuICAgIHJldHVybiBzdWJUcmVlLmZvckVhY2goKChub2RlLCBpbmRleCkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlzTmlsKG5vZGUudmFsdWUpICYmICgobnVsbCA9PT0gKF9hID0gbm9kZS5jaGlsZHJlbikgfHwgdm9pZCAwID09PSBfYSA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgPyBub2RlLnZhbHVlID0gY2FsY3VsYXRlTm9kZVZhbHVlKG5vZGUuY2hpbGRyZW4pIDogbm9kZS52YWx1ZSA9IDApLCBcbiAgICAgICAgc3VtICs9IE1hdGguYWJzKG5vZGUudmFsdWUpO1xuICAgIH0pKSwgc3VtO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhpZXJhcmNoeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/hierarchy.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/index.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/index.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SankeyLayout: () => (/* reexport safe */ _layout__WEBPACK_IMPORTED_MODULE_0__.SankeyLayout),\n/* harmony export */   formatLinkPath: () => (/* reexport safe */ _format__WEBPACK_IMPORTED_MODULE_1__.formatLinkPath),\n/* harmony export */   formatLinkPolygon: () => (/* reexport safe */ _format__WEBPACK_IMPORTED_MODULE_1__.formatLinkPolygon),\n/* harmony export */   formatNodeRect: () => (/* reexport safe */ _format__WEBPACK_IMPORTED_MODULE_1__.formatNodeRect),\n/* harmony export */   getAlignEndTexts: () => (/* reexport safe */ _format__WEBPACK_IMPORTED_MODULE_1__.getAlignEndTexts),\n/* harmony export */   getAlignStartTexts: () => (/* reexport safe */ _format__WEBPACK_IMPORTED_MODULE_1__.getAlignStartTexts),\n/* harmony export */   getBoundsOfNodes: () => (/* reexport safe */ _format__WEBPACK_IMPORTED_MODULE_1__.getBoundsOfNodes),\n/* harmony export */   registerSankeyHighlight: () => (/* binding */ registerSankeyHighlight),\n/* harmony export */   registerSankeyTransforms: () => (/* binding */ registerSankeyTransforms)\n/* harmony export */ });\n/* harmony import */ var _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vgrammar-core */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-core@0.14.13/node_modules/@visactor/vgrammar-core/es/core/factory.js\");\n/* harmony import */ var _transform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./transform */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/transform.js\");\n/* harmony import */ var _sankey_highlight__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./sankey-highlight */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/sankey-highlight.js\");\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/layout.js\");\n/* harmony import */ var _format__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./format */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/format.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst registerSankeyTransforms = () => {\n    _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_2__.Factory.registerTransform(\"sankey\", {\n        transform: _transform__WEBPACK_IMPORTED_MODULE_3__.transform,\n        markPhase: \"beforeJoin\"\n    }, !0);\n};\n\nconst registerSankeyHighlight = () => {\n    _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_2__.Factory.registerInteraction(_sankey_highlight__WEBPACK_IMPORTED_MODULE_4__.SankeyHighlight.type, _sankey_highlight__WEBPACK_IMPORTED_MODULE_4__.SankeyHighlight);\n};\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtEOztBQUVWOztBQUVhOztBQUViOztBQUVaOztBQUVIOztBQUVsQjtBQUNQLElBQUksNERBQU87QUFDWCxtQkFBbUIsaURBQVM7QUFDNUI7QUFDQSxLQUFLO0FBQ0w7O0FBRU87QUFDUCxJQUFJLDREQUFPLHFCQUFxQiw4REFBZSxPQUFPLDhEQUFlO0FBQ3JFO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXNhY3Rvci1uZXh0LXRlbXBsYXRlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B2aXNhY3Rvcit2Z3JhbW1hci1zYW5rZXlAMC4xNC4xMy9ub2RlX21vZHVsZXMvQHZpc2FjdG9yL3ZncmFtbWFyLXNhbmtleS9lcy9pbmRleC5qcz8wYWEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiQHZpc2FjdG9yL3ZncmFtbWFyLWNvcmVcIjtcblxuaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSBcIi4vdHJhbnNmb3JtXCI7XG5cbmltcG9ydCB7IFNhbmtleUhpZ2hsaWdodCB9IGZyb20gXCIuL3NhbmtleS1oaWdobGlnaHRcIjtcblxuZXhwb3J0IHsgU2Fua2V5TGF5b3V0IH0gZnJvbSBcIi4vbGF5b3V0XCI7XG5cbmV4cG9ydCAqIGZyb20gXCIuL2ludGVyZmFjZVwiO1xuXG5leHBvcnQgKiBmcm9tIFwiLi9mb3JtYXRcIjtcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyU2Fua2V5VHJhbnNmb3JtcyA9ICgpID0+IHtcbiAgICBGYWN0b3J5LnJlZ2lzdGVyVHJhbnNmb3JtKFwic2Fua2V5XCIsIHtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm0sXG4gICAgICAgIG1hcmtQaGFzZTogXCJiZWZvcmVKb2luXCJcbiAgICB9LCAhMCk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJTYW5rZXlIaWdobGlnaHQgPSAoKSA9PiB7XG4gICAgRmFjdG9yeS5yZWdpc3RlckludGVyYWN0aW9uKFNhbmtleUhpZ2hsaWdodC50eXBlLCBTYW5rZXlIaWdobGlnaHQpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/layout.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/layout.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SankeyLayout: () => (/* binding */ SankeyLayout)\n/* harmony export */ });\n/* harmony import */ var _hierarchy__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./hierarchy */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/hierarchy.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/array.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isNil.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/clamper.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isFunction.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/logger.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/toValidNumber.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/pickWithout.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isString.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/clamp.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isNumber.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.14.13/node_modules/@visactor/vgrammar-util/es/field.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.14.13/node_modules/@visactor/vgrammar-util/es/direction.js\");\n\n\n\n\n\n\nfunction left(node) {\n    return node.depth;\n}\n\nfunction right(node, maxDepth) {\n    return maxDepth - 1 - node.endDepth;\n}\n\nfunction justify(node, maxDepth) {\n    return node.sourceLinks.length ? node.depth : maxDepth - 1;\n}\n\nfunction center(node, maxDepth, nodeMap) {\n    return node.targetLinks.length ? node.depth : node.sourceLinks.length ? (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__.minInArray)(node.sourceLinks.map((link => nodeMap[link.target].depth))) - 1 : 0;\n}\n\nconst ascendingNodeBreadth = (a, b) => (null == a ? void 0 : a.y0) - (null == b ? void 0 : b.y0), calcDivideValue = (node, isTarget) => {\n    if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(node.value)) return null;\n    const res = (isTarget ? node.targetLinks : node.sourceLinks).reduce(((res, sLink) => ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(sLink.value) ? res.count += 1 : res.sum += sLink.value, \n    res)), {\n        sum: 0,\n        count: 0\n    });\n    return res.count > 0 ? (node.value - res.sum) / res.count : null;\n}, alignFunctions = {\n    left: left,\n    right: right,\n    justify: justify,\n    center: center,\n    start: left,\n    end: right\n}, linkClampe = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_2__.clamper)(0, 1);\n\nclass SankeyLayout {\n    constructor(options) {\n        this._ascendingSourceBreadth = (a, b) => ascendingNodeBreadth(this._nodeMap[a.source], this._nodeMap[b.source]) || a.index - b.index, \n        this._ascendingTargetBreadth = (a, b) => ascendingNodeBreadth(this._nodeMap[a.target], this._nodeMap[b.target]) || a.index - b.index, \n        this.options = Object.assign({}, SankeyLayout.defaultOptions, options);\n        const keyOption = this.options.nodeKey, keyFunc = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(keyOption) ? keyOption : keyOption ? (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_4__.field)(keyOption) : null;\n        this._getNodeKey = keyFunc, this._logger = _visactor_vutils__WEBPACK_IMPORTED_MODULE_5__.Logger.getInstance(), this._alignFunc = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.options.setNodeLayer) ? node => this.options.setNodeLayer(node.datum) : alignFunctions[this.options.nodeAlign];\n    }\n    layout(data, config) {\n        if (!data) return null;\n        const viewBox = \"width\" in config ? {\n            x0: 0,\n            x1: config.width,\n            y0: 0,\n            y1: config.height,\n            width: config.width,\n            height: config.height\n        } : {\n            x0: Math.min(config.x0, config.x1),\n            x1: Math.max(config.x0, config.x1),\n            y0: Math.min(config.y0, config.y1),\n            y1: Math.max(config.y0, config.y1),\n            width: Math.abs(config.x1 - config.x0),\n            height: Math.abs(config.y1 - config.y0)\n        };\n        (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_6__.isVertical)(this.options.direction) ? this._viewBox = {\n            x0: viewBox.y0,\n            x1: viewBox.y1,\n            y0: viewBox.x0,\n            y1: viewBox.x1,\n            width: viewBox.height,\n            height: viewBox.width\n        } : this._viewBox = viewBox;\n        const result = this.computeNodeLinks(data), nodes = result.nodes;\n        let links = result.links;\n        if (this._nodeMap = result.nodeMap, this.computeNodeValues(nodes), this.computeNodeDepths(nodes), \n        [ \"right\", \"end\", \"justify\" ].includes(this.options.nodeAlign) && this.computeNodeEndDepths(nodes), \n        this._maxDepth <= 1) return null;\n        const columns = this.computeNodeBreadths(nodes);\n        if (this.computeLinkBreadths(nodes), nodes.forEach((node => {\n            node.sourceLinks = node.sourceLinks.filter((link => !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.source) && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.target))), \n            node.targetLinks = node.targetLinks.filter((link => !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.source) && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.target)));\n        })), links = links.filter((link => !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.source) && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.target))), \n        (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_6__.isVertical)(this.options.direction)) if (this.options.inverse) {\n            const viewY1 = this._viewBox.x1;\n            nodes.forEach((node => {\n                const {y0: y0, y1: y1, x0: x0, x1: x1} = node;\n                node.y0 = viewY1 - x1, node.y1 = viewY1 - x0, node.x0 = y0, node.x1 = y1;\n            })), links.forEach((link => {\n                link.vertical = !0;\n                const {x0: x0, x1: x1, y0: y0, y1: y1} = link;\n                link.x0 = y0, link.x1 = y1, link.y0 = viewY1 - x0, link.y1 = viewY1 - x1;\n            }));\n        } else nodes.forEach((node => {\n            const {y0: y0, y1: y1} = node;\n            node.y0 = node.x0, node.y1 = node.x1, node.x0 = y0, node.x1 = y1;\n        })), links.forEach((link => {\n            link.vertical = !0;\n            const x0 = link.x0, x1 = link.x1;\n            link.x0 = link.y0, link.x1 = link.y1, link.y0 = x0, link.y1 = x1;\n        })); else this.options.inverse && (nodes.forEach((node => {\n            const {x0: x0, x1: x1} = node;\n            node.x0 = viewBox.x1 - x1, node.x1 = viewBox.x1 - x0;\n        })), links.forEach((link => {\n            link.x0 = viewBox.x1 - link.x0, link.x1 = viewBox.x1 - link.x1;\n        })));\n        return links.forEach((link => {\n            const sourceNode = this._nodeMap[link.source], targetNode = this._nodeMap[link.target];\n            link.sourceRect = {\n                x0: sourceNode.x0,\n                x1: sourceNode.x1,\n                y0: sourceNode.y0,\n                y1: sourceNode.y1\n            }, link.targetRect = {\n                x0: targetNode.x0,\n                x1: targetNode.x1,\n                y1: targetNode.y1,\n                y0: targetNode.y0\n            };\n        })), {\n            nodes: nodes,\n            links: links,\n            columns: columns\n        };\n    }\n    computeHierarchicNodeLinks(originalNodes) {\n        const nodes = [], links = [], nodeMap = {}, linkMap = {}, originalLinks = [];\n        (0,_hierarchy__WEBPACK_IMPORTED_MODULE_7__.calculateNodeValue)(originalNodes);\n        const doSubTree = (subTree, depth, parents) => {\n            subTree.forEach(((node, index) => {\n                const nodeKey = this._getNodeKey ? this._getNodeKey(node) : parents ? `${parents[parents.length - 1].key}-${index}` : `${depth}-${index}`, nodeValue = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(node.value) ? 0 : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_8__.toValidNumber)(node.value);\n                if (nodeMap[nodeKey]) nodeMap[nodeKey].value = void 0; else {\n                    const nodeElement = {\n                        depth: depth,\n                        datum: node,\n                        index: index,\n                        key: nodeKey,\n                        value: nodeValue,\n                        sourceLinks: [],\n                        targetLinks: []\n                    };\n                    nodeMap[nodeKey] = nodeElement, nodes.push(nodeElement);\n                }\n                parents && originalLinks.push({\n                    source: parents[parents.length - 1].key,\n                    target: nodeKey,\n                    value: nodeValue,\n                    parents: parents\n                }), node.children && node.children.length && doSubTree(node.children, depth + 1, parents ? parents.concat([ nodeMap[nodeKey] ]) : [ nodeMap[nodeKey] ]);\n            }));\n        };\n        return doSubTree(originalNodes, 0, null), originalLinks.forEach(((link, index) => {\n            const key = `${link.source}-${link.target}`, linkDatum = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(link, [ \"parents\" ]);\n            if (linkDatum.parents = link.parents.map((node => (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(node, [ \"sourceLinks\", \"targetLinks\" ]))), \n            linkMap[key]) return linkMap[key].value += (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_8__.toValidNumber)(link.value), void linkMap[key].datum.push(linkDatum);\n            const linkElement = {\n                index: index,\n                key: `${link.source}-${link.target}`,\n                source: link.source,\n                target: link.target,\n                datum: [ linkDatum ],\n                value: link.value,\n                parents: link.parents.map((parent => parent.key))\n            };\n            links.push(linkElement), nodeMap[link.source].sourceLinks.push(linkElement), nodeMap[link.target].targetLinks.push(linkElement), \n            linkMap[key] = linkElement;\n        })), {\n            nodes: nodes,\n            links: links,\n            nodeMap: nodeMap\n        };\n    }\n    computeSourceTargetNodeLinks(data) {\n        const nodes = [], links = [], nodeMap = {};\n        data.nodes && data.nodes.forEach(((node, index) => {\n            const nodeElement = {\n                depth: -1,\n                datum: node,\n                index: index,\n                key: this._getNodeKey ? this._getNodeKey(node) : index,\n                value: node.value,\n                sourceLinks: [],\n                targetLinks: []\n            };\n            nodeMap[nodeElement.key] = nodeElement, nodes.push(nodeElement);\n        }));\n        const invalidLinks = [];\n        return data.links.forEach(((link, index) => {\n            const hasSource = !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.source), hasTarget = !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.target);\n            if (data.nodes && (!nodeMap[link.source] || !nodeMap[link.target])) return;\n            data.nodes || !hasSource || nodeMap[link.source] || (nodeMap[link.source] = {\n                value: void 0,\n                depth: -1,\n                index: nodes.length,\n                key: link.source,\n                datum: null,\n                sourceLinks: [],\n                targetLinks: []\n            }, nodes.push(nodeMap[link.source])), data.nodes || !hasTarget || nodeMap[link.target] || (nodeMap[link.target] = {\n                value: void 0,\n                depth: -1,\n                index: nodes.length,\n                key: link.target,\n                datum: null,\n                sourceLinks: [],\n                targetLinks: []\n            }, nodes.push(nodeMap[link.target]));\n            const linkElement = {\n                index: index,\n                source: link.source,\n                target: link.target,\n                datum: link,\n                value: link.value\n            };\n            this.options.divideNodeValueToLink && (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.value) && invalidLinks.push(linkElement), \n            links.push(linkElement), hasSource && nodeMap[link.source].sourceLinks.push(linkElement), \n            hasTarget && nodeMap[link.target].targetLinks.push(linkElement);\n        })), this.options.divideNodeValueToLink && invalidLinks.length && invalidLinks.forEach((link => {\n            const values = [ calcDivideValue(nodeMap[link.source]), calcDivideValue(nodeMap[link.target], !0) ].filter((entry => !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(entry)));\n            values.length && (link.value = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__.minInArray)(values));\n        })), {\n            nodeMap: nodeMap,\n            nodes: nodes,\n            links: links\n        };\n    }\n    computeNodeLinks(data) {\n        let res;\n        \"links\" in data ? res = this.computeSourceTargetNodeLinks(data) : (this._isHierarchic = !0, \n        res = this.computeHierarchicNodeLinks(data.nodes));\n        let nodes = res.nodes;\n        const links = res.links;\n        if (this.options.linkSortBy) for (let i = 0, len = nodes.length; i < len; i++) nodes[i].sourceLinks.sort(this.options.linkSortBy), \n        nodes[i].targetLinks.sort(this.options.linkSortBy);\n        return this.options.dropIsolatedNode && (nodes = nodes.filter((node => node.targetLinks.length || node.sourceLinks.length))), \n        {\n            nodes: nodes,\n            links: links,\n            nodeMap: res.nodeMap\n        };\n    }\n    computeNodeValues(nodes) {\n        for (let i = 0, len = nodes.length; i < len; i++) {\n            const node = nodes[i];\n            node.value = Math.max((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(node.value) ? 0 : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_8__.toValidNumber)(node.value), node.sourceLinks.reduce(((sum, link) => {\n                var _a;\n                return sum + (null !== (_a = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_8__.toValidNumber)(link.value)) && void 0 !== _a ? _a : 0);\n            }), 0), node.targetLinks.reduce(((sum, link) => {\n                var _a;\n                return sum + (null !== (_a = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_8__.toValidNumber)(link.value)) && void 0 !== _a ? _a : 0);\n            }), 0));\n        }\n    }\n    computeNodeDepths(nodes) {\n        const n = nodes.length;\n        let next, nextMap, current = nodes, depth = 0;\n        for (;current.length && depth < n; ) {\n            next = [], nextMap = {};\n            for (let i = 0, curLen = current.length; i < curLen; i++) {\n                const node = current[i];\n                if (node && (node.depth = depth, node.sourceLinks && node.sourceLinks.length)) for (let j = 0, linkLen = node.sourceLinks.length; j < linkLen; j++) {\n                    const link = node.sourceLinks[j];\n                    nextMap[link.target] || (next.push(this._nodeMap[link.target]), nextMap[link.target] = !0);\n                }\n            }\n            current = next, depth += 1;\n        }\n        depth > n && this._logger.warn(\"Error: there is a circular link\"), this._maxDepth = depth;\n    }\n    computeNodeEndDepths(nodes) {\n        const n = nodes.length;\n        let next, nextMap, current = nodes, depth = 0;\n        for (;current.length && depth < n; ) {\n            next = [], nextMap = {};\n            for (let i = 0, curLen = current.length; i < curLen; i++) {\n                const node = current[i];\n                if (node) {\n                    node.endDepth = depth;\n                    for (let j = 0, linkLen = node.targetLinks.length; j < linkLen; j++) {\n                        const link = node.targetLinks[j];\n                        nextMap[link.source] || (next.push(this._nodeMap[link.source]), nextMap[link.source] = !0);\n                    }\n                }\n            }\n            current = next, depth += 1;\n        }\n        depth > n && this._logger.warn(\"Error: there is a circular link\");\n    }\n    computeNodeLayers(nodes) {\n        const nodeWidthOption = this.options.nodeWidth, linkWidthOption = this.options.linkWidth, minStepWidth = this.options.minStepWidth, width = this._viewBox.width;\n        let nodeWidth = null, linkWidth = null, isEvenWidth = !1;\n        if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(nodeWidthOption)) {\n            const ratio = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(parseFloat(nodeWidthOption.replace(\"%\", \"\")) / 100, 0, 1);\n            let stepWidth = width / (this._maxDepth - 1 + ratio);\n            minStepWidth > 0 && (stepWidth = Math.max(minStepWidth, stepWidth)), nodeWidth = stepWidth * ratio, \n            linkWidth = stepWidth * (1 - ratio), isEvenWidth = !0;\n        } else if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(nodeWidthOption)) {\n            if (nodeWidth = nodeWidthOption, (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(linkWidthOption)) linkWidth = linkWidthOption; else if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(linkWidthOption)) {\n                let stepWidth = (width - nodeWidthOption) / (this._maxDepth - 1);\n                minStepWidth > 0 && (stepWidth = Math.max(minStepWidth, stepWidth)), linkWidth = stepWidth - nodeWidthOption;\n            }\n            isEvenWidth = !0;\n        } else (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(nodeWidthOption) && (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(linkWidthOption) && (linkWidth = linkWidthOption);\n        const columns = [];\n        for (let i = 0, len = nodes.length; i < len; i++) {\n            const node = nodes[i];\n            node.layer = this._isHierarchic ? node.depth : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(Math.floor(this._alignFunc(node, this._maxDepth, this._nodeMap)), 0, this._maxDepth - 1);\n            const layer = node.layer;\n            layer === this._maxDepth - 1 && (node.isLastLayer = !0), isEvenWidth && (node.x0 = this._viewBox.x0 + layer * (nodeWidth + linkWidth), \n            node.x1 = node.x0 + nodeWidth), columns[layer] ? columns[layer].push(node) : columns[layer] = [ node ];\n        }\n        if (this.options.nodeSortBy) for (let j = 0, colLen = columns.length; j < colLen; j++) columns[j].sort(this.options.nodeSortBy);\n        if (!isEvenWidth && (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(nodeWidthOption)) {\n            let curLayerX = this._viewBox.x0;\n            for (let i = 0; i < this._maxDepth; i++) {\n                const column = columns[i];\n                let maxNodeWidth = 0, maxLinkWidth = 0;\n                for (let j = 0, colLen = column && column.length; j < colLen; j++) {\n                    const node = column[j], curNodeWidth = nodeWidthOption(node);\n                    node.x0 = curLayerX, node.x1 = curLayerX + curNodeWidth, maxNodeWidth = Math.max(nodeWidth, curNodeWidth);\n                    const sourceLinks = node.sourceLinks;\n                    for (let k = 0, linkLen = sourceLinks.length; k < linkLen; k++) {\n                        const link = sourceLinks[k], curLinkWidth = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(linkWidthOption) ? linkWidthOption(link, this._viewBox) : linkWidth;\n                        maxLinkWidth = Math.max(maxLinkWidth, curLinkWidth);\n                    }\n                }\n                curLayerX += maxNodeWidth + maxLinkWidth;\n            }\n        }\n        return columns;\n    }\n    initializeNodeBreadths(columns) {\n        var _a, _b;\n        const minLinkHeight = null !== (_a = this.options.minLinkHeight) && void 0 !== _a ? _a : 0;\n        let minNodeHeight = null !== (_b = this.options.minNodeHeight) && void 0 !== _b ? _b : 0;\n        ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(minNodeHeight) || minNodeHeight < minLinkHeight) && (minNodeHeight = minLinkHeight);\n        let ky = 0, getGapY = null, forceNodeHeight = null;\n        if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.options.nodeGap)) getGapY = this.options.nodeGap, ky = columns.reduce(((val, column) => {\n            const sumValue = column.reduce(((sum, node) => sum + node.value), 0), sumGapY = column.reduce(((sum, node) => sum + this.options.nodeGap(node)), 0);\n            return Math.min(val, (this._viewBox.height - sumGapY) / sumValue);\n        }), 1 / 0); else {\n            const maxRowCount = columns.reduce(((cnt, column) => Math.max(cnt, column.length)), 0), maxStepHeight = this._viewBox.height / maxRowCount, gapY = Math.min(this.options.nodeGap, maxStepHeight);\n            if (getGapY = () => gapY, this._gapY = gapY, (minNodeHeight + gapY) * maxRowCount > this._viewBox.height && (minNodeHeight = maxStepHeight - gapY), \n            this.options.equalNodeHeight) forceNodeHeight = this._viewBox.height / maxRowCount - gapY; else {\n                const calGapY = minNodeHeight > 0 ? Math.max(gapY, minNodeHeight) : gapY;\n                ky = columns.reduce(((val, column) => {\n                    const sumValue = column.reduce(((sum, node) => sum + node.value), 0);\n                    return Math.min(val, (this._viewBox.height - ((column.length - 1) * calGapY + minNodeHeight)) / sumValue);\n                }), 1 / 0);\n            }\n        }\n        const isStartGap = \"start\" === this.options.gapPosition, isMiddleGap = !isStartGap && \"end\" !== this.options.gapPosition, getNodeHeight = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(this.options.nodeHeight) ? node => this.options.nodeHeight : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.options.nodeHeight) ? this.options.nodeHeight : forceNodeHeight > 0 ? node => forceNodeHeight : node => Math.max(node.value * ky, 0), getLinkHeight = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(this.options.linkHeight) ? () => this.options.linkHeight : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.options.linkHeight) ? this.options.linkHeight : (link, sourceNode, sourceNodeHeight) => Math.max(sourceNode.value ? sourceNodeHeight * linkClampe(link.value / sourceNode.value) : 0, minLinkHeight, 0);\n        for (let i = 0, columnCount = columns.length; i < columnCount; i++) {\n            const nodes = columns[i];\n            if (!nodes || !nodes.length) continue;\n            let y = this._viewBox.y0, gapY = 0, nodeHeight = 0, calculatedNodeHeight = 0;\n            for (let j = 0, len = nodes.length; j < len; j++) {\n                const node = nodes[j];\n                gapY = getGapY(node), isStartGap && (y += gapY), calculatedNodeHeight = getNodeHeight(node), \n                nodeHeight = Math.max(calculatedNodeHeight, minNodeHeight), node.y0 = y, node.y1 = y + nodeHeight, \n                y = isStartGap ? node.y1 : node.y1 + gapY;\n                for (let k = 0, linkLen = node.sourceLinks.length; k < linkLen; k++) {\n                    const link = node.sourceLinks[k];\n                    link.thickness = getLinkHeight(link, node, calculatedNodeHeight);\n                }\n            }\n            let deltaY = this._viewBox.y1 - y + (isMiddleGap ? gapY : 0);\n            if (deltaY > 0) if (\"start\" === this.options.crossNodeAlign) ; else if (\"end\" === this.options.crossNodeAlign) for (let j = 0, len = nodes.length; j < len; ++j) {\n                const node = nodes[j];\n                node.y0 += deltaY, node.y1 += deltaY;\n            } else {\n                deltaY /= nodes.length + 1;\n                for (let j = 0, len = nodes.length; j < len; ++j) {\n                    const node = nodes[j];\n                    node.y0 += deltaY * (j + 1), node.y1 += deltaY * (j + 1);\n                }\n            } else if (deltaY < 0 && nodes.length > 1 && (deltaY /= nodes.length - 1, gapY + deltaY >= 0)) {\n                gapY += deltaY, this._gapY = Math.min(gapY);\n                for (let j = 1, len = nodes.length; j < len; ++j) {\n                    const node = nodes[j];\n                    node.y0 += deltaY * j, node.y1 += deltaY * j;\n                }\n            }\n            this.reorderLinks(nodes);\n        }\n    }\n    computeNodeBreadths(nodes) {\n        const columns = this.computeNodeLayers(nodes);\n        this.initializeNodeBreadths(columns);\n        const iterations = this.options.iterations;\n        if (!this._isHierarchic && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.options.setNodeLayer) && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.options.nodeGap)) for (let i = 0; i < iterations; ++i) {\n            const alpha = Math.pow(.99, i), beta = Math.max(1 - alpha, (i + 1) / iterations);\n            this.relaxRightToLeft(columns, alpha, beta), this.relaxLeftToRight(columns, alpha, beta);\n        }\n        return columns;\n    }\n    relaxLeftToRight(columns, alpha, beta) {\n        for (let i = 1, n = columns.length; i < n; ++i) {\n            const column = columns[i];\n            for (let j = 0, colLen = column.length; j < colLen; j++) {\n                const target = column[j];\n                let y = 0, w = 0;\n                for (let k = 0, linkLen = target.targetLinks.length; k < linkLen; k++) {\n                    const link = target.targetLinks[k], v = link.value * (target.layer - this._nodeMap[link.source].layer);\n                    y += this.targetTop(this._nodeMap[link.source], target) * v, w += v;\n                }\n                if (!(w > 0)) continue;\n                const dy = (y / w - target.y0) * alpha;\n                target.y0 += dy, target.y1 += dy, this.reorderNodeLinks(target);\n            }\n            (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.options.nodeSortBy) && column.sort(ascendingNodeBreadth), this.resolveCollisions(column, beta);\n        }\n    }\n    relaxRightToLeft(columns, alpha, beta) {\n        for (let i = columns.length - 2; i >= 0; --i) {\n            const column = columns[i];\n            for (let j = 0, colLen = column.length; j < colLen; j++) {\n                const source = column[j];\n                let y = 0, w = 0;\n                for (let k = 0, linkLen = source.sourceLinks.length; k < linkLen; k++) {\n                    const link = source.sourceLinks[k], v = link.value * (this._nodeMap[link.target].layer - source.layer);\n                    y += this.sourceTop(source, this._nodeMap[link.target]) * v, w += v;\n                }\n                if (!(w > 0)) continue;\n                const dy = (y / w - source.y0) * alpha;\n                source.y0 += dy, source.y1 += dy, this.reorderNodeLinks(source);\n            }\n            void 0 === this.options.nodeSortBy && column.sort(ascendingNodeBreadth), this.resolveCollisions(column, beta);\n        }\n    }\n    resolveCollisions(nodes, alpha) {\n        const i = nodes.length >> 1, subject = nodes[i];\n        this.resolveCollisionsBottomToTop(nodes, subject.y0 - this._gapY, i - 1, alpha), \n        this.resolveCollisionsTopToBottom(nodes, subject.y1 + this._gapY, i + 1, alpha), \n        this.resolveCollisionsBottomToTop(nodes, this._viewBox.y1, nodes.length - 1, alpha), \n        this.resolveCollisionsTopToBottom(nodes, this._viewBox.y0, 0, alpha);\n    }\n    resolveCollisionsTopToBottom(nodes, y, i, alpha) {\n        for (;i < nodes.length; ++i) {\n            const node = nodes[i], dy = (y - node.y0) * alpha;\n            dy > 1e-6 && (node.y0 += dy, node.y1 += dy), y = node.y1 + this._gapY;\n        }\n    }\n    resolveCollisionsBottomToTop(nodes, y, i, alpha) {\n        for (;i >= 0; --i) {\n            const node = nodes[i], dy = (node.y1 - y) * alpha;\n            dy > 1e-6 && (node.y0 -= dy, node.y1 -= dy), y = node.y0 - this._gapY;\n        }\n    }\n    targetTop(source, target) {\n        let i, len, link, y = source.y0 - (source.sourceLinks.length - 1) * this._gapY / 2;\n        for (i = 0, len = source.sourceLinks.length; i < len && (link = source.sourceLinks[i], \n        link.target !== target.key); i++) y += link.thickness + this._gapY;\n        for (i = 0, len = target.targetLinks.length; i < len && (link = target.targetLinks[i], \n        link.source !== source.key); i++) y -= link.thickness;\n        return y;\n    }\n    sourceTop(source, target) {\n        let i, len, link, y = target.y0 - (target.targetLinks.length - 1) * this._gapY / 2;\n        for (i = 0, len = target.targetLinks.length; i < len && (link = target.targetLinks[i], \n        link.source !== source.key); i++) y += link.thickness + this._gapY;\n        for (i = 0, len = source.sourceLinks.length; i < len && (link = source.sourceLinks[i], \n        link.target !== target.key); i++) y -= link.thickness;\n        return y;\n    }\n    computeLinkBreadthsNoOverlap(nodes) {\n        for (let i = 0, len = nodes.length; i < len; i++) {\n            const node = nodes[i];\n            let y0 = node.y0, reachBottom = !1;\n            for (let j = 0, linkLen = node.sourceLinks.length; j < linkLen; j++) {\n                const link = node.sourceLinks[j];\n                reachBottom || (link.y0 = y0 + link.thickness / 2), link.x0 = node.x1, y0 + link.thickness > node.y1 || reachBottom ? (link.y0 = node.y1 - link.thickness / 2, \n                reachBottom = !0) : y0 += link.thickness;\n            }\n            let y1 = node.y0;\n            reachBottom = !1;\n            for (let j = 0, linkLen = node.targetLinks.length; j < linkLen; j++) {\n                const link = node.targetLinks[j];\n                reachBottom || (link.y1 = y1 + link.thickness / 2), link.x1 = node.x0, y1 + link.thickness > node.y1 || reachBottom ? (link.y1 = node.y1 - link.thickness / 2, \n                reachBottom = !0) : y1 += link.thickness;\n            }\n        }\n    }\n    computeLinkBreadthsOverlap(nodes) {\n        const linkOverlap = this.options.linkOverlap;\n        for (let i = 0, len = nodes.length; i < len; i++) {\n            const node = nodes[i], pos = \"start\" === linkOverlap ? node.y0 : \"end\" === linkOverlap ? node.y1 : (node.y0 + node.y1) / 2, sign = \"start\" === linkOverlap ? .5 : \"end\" === linkOverlap ? -.5 : 0;\n            for (let j = 0, linkLen = node.sourceLinks.length; j < linkLen; j++) {\n                const link = node.sourceLinks[j];\n                link.y0 = pos + sign * link.thickness, link.x0 = node.x1;\n            }\n            for (let j = 0, linkLen = node.targetLinks.length; j < linkLen; j++) {\n                const link = node.targetLinks[j];\n                link.y1 = pos + sign * link.thickness, link.x1 = node.x0;\n            }\n        }\n    }\n    computeLinkBreadths(nodes) {\n        this.options.linkOverlap ? this.computeLinkBreadthsOverlap(nodes) : this.computeLinkBreadthsNoOverlap(nodes);\n    }\n    reorderNodeLinks(node) {\n        if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.options.linkSortBy)) {\n            const targetLinks = node.targetLinks, sourceLinks = node.sourceLinks;\n            for (let j = 0, linkLen = targetLinks.length; j < linkLen; j++) {\n                const link = targetLinks[j];\n                this._nodeMap[link.source].sourceLinks.sort(this._ascendingTargetBreadth);\n            }\n            for (let j = 0, linkLen = sourceLinks.length; j < linkLen; j++) {\n                const link = sourceLinks[j];\n                this._nodeMap[link.target].targetLinks.sort(this._ascendingSourceBreadth);\n            }\n        }\n    }\n    reorderLinks(nodes) {\n        if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.options.linkSortBy)) for (let i = 0, len = nodes.length; i < len; i++) {\n            const node = nodes[i];\n            node.sourceLinks.sort(this._ascendingTargetBreadth), node.targetLinks.sort(this._ascendingSourceBreadth);\n        }\n    }\n}\n\nSankeyLayout.defaultOptions = {\n    iterations: 6,\n    nodeAlign: \"justify\",\n    direction: \"horizontal\",\n    nodeWidth: 24,\n    nodeGap: 8,\n    crossNodeAlign: \"middle\",\n    dropIsolatedNode: !0\n};\n//# sourceMappingURL=layout.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL2xheW91dC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFpRDs7QUFFd0Y7O0FBRTdFOztBQUU1RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRFQUE0RSw0REFBVTtBQUN0Rjs7QUFFQTtBQUNBLFFBQVEsNERBQUs7QUFDYiwwRkFBMEYsNERBQUs7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZUFBZSx5REFBTzs7QUFFaEI7QUFDUDtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsMERBQTBELDREQUFVLHNDQUFzQyw4REFBSztBQUMvRyxtREFBbUQsb0RBQU0sa0NBQWtDLDREQUFVO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtRUFBVTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsNERBQUssa0JBQWtCLDREQUFLO0FBQzdGLGlFQUFpRSw0REFBSyxrQkFBa0IsNERBQUs7QUFDN0YsU0FBUyxtQ0FBbUMsNERBQUssa0JBQWtCLDREQUFLO0FBQ3hFLFFBQVEsbUVBQVU7QUFDbEI7QUFDQTtBQUNBLHVCQUF1QixnQ0FBZ0M7QUFDdkQ7QUFDQSxhQUFhO0FBQ2I7QUFDQSx1QkFBdUIsZ0NBQWdDO0FBQ3ZEO0FBQ0EsYUFBYTtBQUNiLFVBQVU7QUFDVixtQkFBbUIsZ0JBQWdCO0FBQ25DO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVMsSUFBSTtBQUNiLG1CQUFtQixnQkFBZ0I7QUFDbkM7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsY0FBYztBQUNoRSxRQUFRLDhEQUFrQjtBQUMxQjtBQUNBO0FBQ0EseUZBQXlGLGdDQUFnQyxHQUFHLE1BQU0sT0FBTyxNQUFNLEdBQUcsTUFBTSxlQUFlLDREQUFLLG1CQUFtQiwrREFBYTtBQUM1TSx1RUFBdUU7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQSwyQkFBMkIsWUFBWSxHQUFHLFlBQVksZUFBZSw0REFBVztBQUNoRiw4REFBOEQsNERBQVc7QUFDekUsdURBQXVELCtEQUFhO0FBQ3BFO0FBQ0E7QUFDQSx3QkFBd0IsWUFBWSxHQUFHLFlBQVk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLCtCQUErQiw0REFBSyw0QkFBNEIsNERBQUs7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDREQUFLO0FBQ3ZEO0FBQ0E7QUFDQSxTQUFTO0FBQ1Qsa0lBQWtJLDREQUFLO0FBQ3ZJLDJDQUEyQyw0REFBVTtBQUNyRCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxTQUFTO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxTQUFTO0FBQ3JEO0FBQ0Esa0NBQWtDLDREQUFLLG1CQUFtQiwrREFBYTtBQUN2RTtBQUNBLDZDQUE2QywrREFBYTtBQUMxRCxhQUFhO0FBQ2I7QUFDQSw2Q0FBNkMsK0RBQWE7QUFDMUQsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZCQUE2QjtBQUMzQztBQUNBLHFEQUFxRCxZQUFZO0FBQ2pFO0FBQ0Esa0pBQWtKLGFBQWE7QUFDL0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkJBQTZCO0FBQzNDO0FBQ0EscURBQXFELFlBQVk7QUFDakU7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLGFBQWE7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw2REFBUTtBQUNwQiwwQkFBMEIsNkRBQUs7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsVUFBVSxTQUFTLDZEQUFRO0FBQzNCLDZDQUE2Qyw2REFBUSxnREFBZ0QsU0FBUyw0REFBSztBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsS0FBSyw0REFBVSxxQkFBcUIsNkRBQVE7QUFDdEQ7QUFDQSw0Q0FBNEMsU0FBUztBQUNyRDtBQUNBLDJEQUEyRCw2REFBSztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSxZQUFZO0FBQzFGLDRCQUE0Qiw0REFBVTtBQUN0QztBQUNBLDRCQUE0QixvQkFBb0I7QUFDaEQ7QUFDQTtBQUNBLGtFQUFrRSxZQUFZO0FBQzlFO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxhQUFhO0FBQy9FLG9FQUFvRSw0REFBVTtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFLO0FBQ2Q7QUFDQSxZQUFZLDREQUFVO0FBQ3RCO0FBQ0E7QUFDQSxTQUFTLFdBQVc7QUFDcEI7QUFDQTtBQUNBLHVHQUF1RztBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esa0pBQWtKLDZEQUFRLDhEQUE4RCw0REFBVSw0SkFBNEosNkRBQVEsNERBQTRELDREQUFVO0FBQzVjLHNEQUFzRCxpQkFBaUI7QUFDdkU7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELFNBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsYUFBYTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLG9GQUFvRixTQUFTO0FBQ3hLO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxvREFBb0QsU0FBUztBQUM3RDtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxvREFBb0QsU0FBUztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDREQUFVLGdDQUFnQyw0REFBVSx3Q0FBd0MsZ0JBQWdCO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxPQUFPO0FBQ25EO0FBQ0Esb0RBQW9ELFlBQVk7QUFDaEU7QUFDQTtBQUNBLHFFQUFxRSxhQUFhO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw0REFBSztBQUNqQjtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsUUFBUTtBQUNqRDtBQUNBLG9EQUFvRCxZQUFZO0FBQ2hFO0FBQ0E7QUFDQSxxRUFBcUUsYUFBYTtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGtCQUFrQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxRQUFRO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRCxxQ0FBcUM7QUFDckMscURBQXFEO0FBQ3JELHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRCxxQ0FBcUM7QUFDckMscURBQXFEO0FBQ3JELHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsU0FBUztBQUNyRDtBQUNBO0FBQ0EsK0RBQStELGFBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGFBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxTQUFTO0FBQ3JEO0FBQ0EsK0RBQStELGFBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGFBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw0REFBSztBQUNqQjtBQUNBLDBEQUEwRCxhQUFhO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxhQUFhO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNERBQUssK0RBQStELFNBQVM7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpc2FjdG9yLW5leHQtdGVtcGxhdGUvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL2xheW91dC5qcz9kY2Q3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNhbGN1bGF0ZU5vZGVWYWx1ZSB9IGZyb20gXCIuL2hpZXJhcmNoeVwiO1xuXG5pbXBvcnQgeyBpc05pbCwgY2xhbXAsIG1pbkluQXJyYXksIGlzRnVuY3Rpb24sIGlzTnVtYmVyLCBpc1N0cmluZywgTG9nZ2VyLCBjbGFtcGVyLCB0b1ZhbGlkTnVtYmVyLCBwaWNrV2l0aG91dCB9IGZyb20gXCJAdmlzYWN0b3IvdnV0aWxzXCI7XG5cbmltcG9ydCB7IGZpZWxkLCBpc1ZlcnRpY2FsIH0gZnJvbSBcIkB2aXNhY3Rvci92Z3JhbW1hci11dGlsXCI7XG5cbmZ1bmN0aW9uIGxlZnQobm9kZSkge1xuICAgIHJldHVybiBub2RlLmRlcHRoO1xufVxuXG5mdW5jdGlvbiByaWdodChub2RlLCBtYXhEZXB0aCkge1xuICAgIHJldHVybiBtYXhEZXB0aCAtIDEgLSBub2RlLmVuZERlcHRoO1xufVxuXG5mdW5jdGlvbiBqdXN0aWZ5KG5vZGUsIG1heERlcHRoKSB7XG4gICAgcmV0dXJuIG5vZGUuc291cmNlTGlua3MubGVuZ3RoID8gbm9kZS5kZXB0aCA6IG1heERlcHRoIC0gMTtcbn1cblxuZnVuY3Rpb24gY2VudGVyKG5vZGUsIG1heERlcHRoLCBub2RlTWFwKSB7XG4gICAgcmV0dXJuIG5vZGUudGFyZ2V0TGlua3MubGVuZ3RoID8gbm9kZS5kZXB0aCA6IG5vZGUuc291cmNlTGlua3MubGVuZ3RoID8gbWluSW5BcnJheShub2RlLnNvdXJjZUxpbmtzLm1hcCgobGluayA9PiBub2RlTWFwW2xpbmsudGFyZ2V0XS5kZXB0aCkpKSAtIDEgOiAwO1xufVxuXG5jb25zdCBhc2NlbmRpbmdOb2RlQnJlYWR0aCA9IChhLCBiKSA9PiAobnVsbCA9PSBhID8gdm9pZCAwIDogYS55MCkgLSAobnVsbCA9PSBiID8gdm9pZCAwIDogYi55MCksIGNhbGNEaXZpZGVWYWx1ZSA9IChub2RlLCBpc1RhcmdldCkgPT4ge1xuICAgIGlmIChpc05pbChub2RlLnZhbHVlKSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgcmVzID0gKGlzVGFyZ2V0ID8gbm9kZS50YXJnZXRMaW5rcyA6IG5vZGUuc291cmNlTGlua3MpLnJlZHVjZSgoKHJlcywgc0xpbmspID0+IChpc05pbChzTGluay52YWx1ZSkgPyByZXMuY291bnQgKz0gMSA6IHJlcy5zdW0gKz0gc0xpbmsudmFsdWUsIFxuICAgIHJlcykpLCB7XG4gICAgICAgIHN1bTogMCxcbiAgICAgICAgY291bnQ6IDBcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLmNvdW50ID4gMCA/IChub2RlLnZhbHVlIC0gcmVzLnN1bSkgLyByZXMuY291bnQgOiBudWxsO1xufSwgYWxpZ25GdW5jdGlvbnMgPSB7XG4gICAgbGVmdDogbGVmdCxcbiAgICByaWdodDogcmlnaHQsXG4gICAganVzdGlmeToganVzdGlmeSxcbiAgICBjZW50ZXI6IGNlbnRlcixcbiAgICBzdGFydDogbGVmdCxcbiAgICBlbmQ6IHJpZ2h0XG59LCBsaW5rQ2xhbXBlID0gY2xhbXBlcigwLCAxKTtcblxuZXhwb3J0IGNsYXNzIFNhbmtleUxheW91dCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLl9hc2NlbmRpbmdTb3VyY2VCcmVhZHRoID0gKGEsIGIpID0+IGFzY2VuZGluZ05vZGVCcmVhZHRoKHRoaXMuX25vZGVNYXBbYS5zb3VyY2VdLCB0aGlzLl9ub2RlTWFwW2Iuc291cmNlXSkgfHwgYS5pbmRleCAtIGIuaW5kZXgsIFxuICAgICAgICB0aGlzLl9hc2NlbmRpbmdUYXJnZXRCcmVhZHRoID0gKGEsIGIpID0+IGFzY2VuZGluZ05vZGVCcmVhZHRoKHRoaXMuX25vZGVNYXBbYS50YXJnZXRdLCB0aGlzLl9ub2RlTWFwW2IudGFyZ2V0XSkgfHwgYS5pbmRleCAtIGIuaW5kZXgsIFxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBTYW5rZXlMYXlvdXQuZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBrZXlPcHRpb24gPSB0aGlzLm9wdGlvbnMubm9kZUtleSwga2V5RnVuYyA9IGlzRnVuY3Rpb24oa2V5T3B0aW9uKSA/IGtleU9wdGlvbiA6IGtleU9wdGlvbiA/IGZpZWxkKGtleU9wdGlvbikgOiBudWxsO1xuICAgICAgICB0aGlzLl9nZXROb2RlS2V5ID0ga2V5RnVuYywgdGhpcy5fbG9nZ2VyID0gTG9nZ2VyLmdldEluc3RhbmNlKCksIHRoaXMuX2FsaWduRnVuYyA9IGlzRnVuY3Rpb24odGhpcy5vcHRpb25zLnNldE5vZGVMYXllcikgPyBub2RlID0+IHRoaXMub3B0aW9ucy5zZXROb2RlTGF5ZXIobm9kZS5kYXR1bSkgOiBhbGlnbkZ1bmN0aW9uc1t0aGlzLm9wdGlvbnMubm9kZUFsaWduXTtcbiAgICB9XG4gICAgbGF5b3V0KGRhdGEsIGNvbmZpZykge1xuICAgICAgICBpZiAoIWRhdGEpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB2aWV3Qm94ID0gXCJ3aWR0aFwiIGluIGNvbmZpZyA/IHtcbiAgICAgICAgICAgIHgwOiAwLFxuICAgICAgICAgICAgeDE6IGNvbmZpZy53aWR0aCxcbiAgICAgICAgICAgIHkwOiAwLFxuICAgICAgICAgICAgeTE6IGNvbmZpZy5oZWlnaHQsXG4gICAgICAgICAgICB3aWR0aDogY29uZmlnLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBjb25maWcuaGVpZ2h0XG4gICAgICAgIH0gOiB7XG4gICAgICAgICAgICB4MDogTWF0aC5taW4oY29uZmlnLngwLCBjb25maWcueDEpLFxuICAgICAgICAgICAgeDE6IE1hdGgubWF4KGNvbmZpZy54MCwgY29uZmlnLngxKSxcbiAgICAgICAgICAgIHkwOiBNYXRoLm1pbihjb25maWcueTAsIGNvbmZpZy55MSksXG4gICAgICAgICAgICB5MTogTWF0aC5tYXgoY29uZmlnLnkwLCBjb25maWcueTEpLFxuICAgICAgICAgICAgd2lkdGg6IE1hdGguYWJzKGNvbmZpZy54MSAtIGNvbmZpZy54MCksXG4gICAgICAgICAgICBoZWlnaHQ6IE1hdGguYWJzKGNvbmZpZy55MSAtIGNvbmZpZy55MClcbiAgICAgICAgfTtcbiAgICAgICAgaXNWZXJ0aWNhbCh0aGlzLm9wdGlvbnMuZGlyZWN0aW9uKSA/IHRoaXMuX3ZpZXdCb3ggPSB7XG4gICAgICAgICAgICB4MDogdmlld0JveC55MCxcbiAgICAgICAgICAgIHgxOiB2aWV3Qm94LnkxLFxuICAgICAgICAgICAgeTA6IHZpZXdCb3gueDAsXG4gICAgICAgICAgICB5MTogdmlld0JveC54MSxcbiAgICAgICAgICAgIHdpZHRoOiB2aWV3Qm94LmhlaWdodCxcbiAgICAgICAgICAgIGhlaWdodDogdmlld0JveC53aWR0aFxuICAgICAgICB9IDogdGhpcy5fdmlld0JveCA9IHZpZXdCb3g7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY29tcHV0ZU5vZGVMaW5rcyhkYXRhKSwgbm9kZXMgPSByZXN1bHQubm9kZXM7XG4gICAgICAgIGxldCBsaW5rcyA9IHJlc3VsdC5saW5rcztcbiAgICAgICAgaWYgKHRoaXMuX25vZGVNYXAgPSByZXN1bHQubm9kZU1hcCwgdGhpcy5jb21wdXRlTm9kZVZhbHVlcyhub2RlcyksIHRoaXMuY29tcHV0ZU5vZGVEZXB0aHMobm9kZXMpLCBcbiAgICAgICAgWyBcInJpZ2h0XCIsIFwiZW5kXCIsIFwianVzdGlmeVwiIF0uaW5jbHVkZXModGhpcy5vcHRpb25zLm5vZGVBbGlnbikgJiYgdGhpcy5jb21wdXRlTm9kZUVuZERlcHRocyhub2RlcyksIFxuICAgICAgICB0aGlzLl9tYXhEZXB0aCA8PSAxKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgY29sdW1ucyA9IHRoaXMuY29tcHV0ZU5vZGVCcmVhZHRocyhub2Rlcyk7XG4gICAgICAgIGlmICh0aGlzLmNvbXB1dGVMaW5rQnJlYWR0aHMobm9kZXMpLCBub2Rlcy5mb3JFYWNoKChub2RlID0+IHtcbiAgICAgICAgICAgIG5vZGUuc291cmNlTGlua3MgPSBub2RlLnNvdXJjZUxpbmtzLmZpbHRlcigobGluayA9PiAhaXNOaWwobGluay5zb3VyY2UpICYmICFpc05pbChsaW5rLnRhcmdldCkpKSwgXG4gICAgICAgICAgICBub2RlLnRhcmdldExpbmtzID0gbm9kZS50YXJnZXRMaW5rcy5maWx0ZXIoKGxpbmsgPT4gIWlzTmlsKGxpbmsuc291cmNlKSAmJiAhaXNOaWwobGluay50YXJnZXQpKSk7XG4gICAgICAgIH0pKSwgbGlua3MgPSBsaW5rcy5maWx0ZXIoKGxpbmsgPT4gIWlzTmlsKGxpbmsuc291cmNlKSAmJiAhaXNOaWwobGluay50YXJnZXQpKSksIFxuICAgICAgICBpc1ZlcnRpY2FsKHRoaXMub3B0aW9ucy5kaXJlY3Rpb24pKSBpZiAodGhpcy5vcHRpb25zLmludmVyc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXdZMSA9IHRoaXMuX3ZpZXdCb3gueDE7XG4gICAgICAgICAgICBub2Rlcy5mb3JFYWNoKChub2RlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7eTA6IHkwLCB5MTogeTEsIHgwOiB4MCwgeDE6IHgxfSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgbm9kZS55MCA9IHZpZXdZMSAtIHgxLCBub2RlLnkxID0gdmlld1kxIC0geDAsIG5vZGUueDAgPSB5MCwgbm9kZS54MSA9IHkxO1xuICAgICAgICAgICAgfSkpLCBsaW5rcy5mb3JFYWNoKChsaW5rID0+IHtcbiAgICAgICAgICAgICAgICBsaW5rLnZlcnRpY2FsID0gITA7XG4gICAgICAgICAgICAgICAgY29uc3Qge3gwOiB4MCwgeDE6IHgxLCB5MDogeTAsIHkxOiB5MX0gPSBsaW5rO1xuICAgICAgICAgICAgICAgIGxpbmsueDAgPSB5MCwgbGluay54MSA9IHkxLCBsaW5rLnkwID0gdmlld1kxIC0geDAsIGxpbmsueTEgPSB2aWV3WTEgLSB4MTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIG5vZGVzLmZvckVhY2goKG5vZGUgPT4ge1xuICAgICAgICAgICAgY29uc3Qge3kwOiB5MCwgeTE6IHkxfSA9IG5vZGU7XG4gICAgICAgICAgICBub2RlLnkwID0gbm9kZS54MCwgbm9kZS55MSA9IG5vZGUueDEsIG5vZGUueDAgPSB5MCwgbm9kZS54MSA9IHkxO1xuICAgICAgICB9KSksIGxpbmtzLmZvckVhY2goKGxpbmsgPT4ge1xuICAgICAgICAgICAgbGluay52ZXJ0aWNhbCA9ICEwO1xuICAgICAgICAgICAgY29uc3QgeDAgPSBsaW5rLngwLCB4MSA9IGxpbmsueDE7XG4gICAgICAgICAgICBsaW5rLngwID0gbGluay55MCwgbGluay54MSA9IGxpbmsueTEsIGxpbmsueTAgPSB4MCwgbGluay55MSA9IHgxO1xuICAgICAgICB9KSk7IGVsc2UgdGhpcy5vcHRpb25zLmludmVyc2UgJiYgKG5vZGVzLmZvckVhY2goKG5vZGUgPT4ge1xuICAgICAgICAgICAgY29uc3Qge3gwOiB4MCwgeDE6IHgxfSA9IG5vZGU7XG4gICAgICAgICAgICBub2RlLngwID0gdmlld0JveC54MSAtIHgxLCBub2RlLngxID0gdmlld0JveC54MSAtIHgwO1xuICAgICAgICB9KSksIGxpbmtzLmZvckVhY2goKGxpbmsgPT4ge1xuICAgICAgICAgICAgbGluay54MCA9IHZpZXdCb3gueDEgLSBsaW5rLngwLCBsaW5rLngxID0gdmlld0JveC54MSAtIGxpbmsueDE7XG4gICAgICAgIH0pKSk7XG4gICAgICAgIHJldHVybiBsaW5rcy5mb3JFYWNoKChsaW5rID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZU5vZGUgPSB0aGlzLl9ub2RlTWFwW2xpbmsuc291cmNlXSwgdGFyZ2V0Tm9kZSA9IHRoaXMuX25vZGVNYXBbbGluay50YXJnZXRdO1xuICAgICAgICAgICAgbGluay5zb3VyY2VSZWN0ID0ge1xuICAgICAgICAgICAgICAgIHgwOiBzb3VyY2VOb2RlLngwLFxuICAgICAgICAgICAgICAgIHgxOiBzb3VyY2VOb2RlLngxLFxuICAgICAgICAgICAgICAgIHkwOiBzb3VyY2VOb2RlLnkwLFxuICAgICAgICAgICAgICAgIHkxOiBzb3VyY2VOb2RlLnkxXG4gICAgICAgICAgICB9LCBsaW5rLnRhcmdldFJlY3QgPSB7XG4gICAgICAgICAgICAgICAgeDA6IHRhcmdldE5vZGUueDAsXG4gICAgICAgICAgICAgICAgeDE6IHRhcmdldE5vZGUueDEsXG4gICAgICAgICAgICAgICAgeTE6IHRhcmdldE5vZGUueTEsXG4gICAgICAgICAgICAgICAgeTA6IHRhcmdldE5vZGUueTBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSwge1xuICAgICAgICAgICAgbm9kZXM6IG5vZGVzLFxuICAgICAgICAgICAgbGlua3M6IGxpbmtzLFxuICAgICAgICAgICAgY29sdW1uczogY29sdW1uc1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb21wdXRlSGllcmFyY2hpY05vZGVMaW5rcyhvcmlnaW5hbE5vZGVzKSB7XG4gICAgICAgIGNvbnN0IG5vZGVzID0gW10sIGxpbmtzID0gW10sIG5vZGVNYXAgPSB7fSwgbGlua01hcCA9IHt9LCBvcmlnaW5hbExpbmtzID0gW107XG4gICAgICAgIGNhbGN1bGF0ZU5vZGVWYWx1ZShvcmlnaW5hbE5vZGVzKTtcbiAgICAgICAgY29uc3QgZG9TdWJUcmVlID0gKHN1YlRyZWUsIGRlcHRoLCBwYXJlbnRzKSA9PiB7XG4gICAgICAgICAgICBzdWJUcmVlLmZvckVhY2goKChub2RlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVLZXkgPSB0aGlzLl9nZXROb2RlS2V5ID8gdGhpcy5fZ2V0Tm9kZUtleShub2RlKSA6IHBhcmVudHMgPyBgJHtwYXJlbnRzW3BhcmVudHMubGVuZ3RoIC0gMV0ua2V5fS0ke2luZGV4fWAgOiBgJHtkZXB0aH0tJHtpbmRleH1gLCBub2RlVmFsdWUgPSBpc05pbChub2RlLnZhbHVlKSA/IDAgOiB0b1ZhbGlkTnVtYmVyKG5vZGUudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChub2RlTWFwW25vZGVLZXldKSBub2RlTWFwW25vZGVLZXldLnZhbHVlID0gdm9pZCAwOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZUVsZW1lbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXB0aDogZGVwdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXR1bTogbm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogbm9kZUtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBub2RlVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VMaW5rczogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRMaW5rczogW11cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZU1hcFtub2RlS2V5XSA9IG5vZGVFbGVtZW50LCBub2Rlcy5wdXNoKG5vZGVFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyZW50cyAmJiBvcmlnaW5hbExpbmtzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHBhcmVudHNbcGFyZW50cy5sZW5ndGggLSAxXS5rZXksXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogbm9kZUtleSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5vZGVWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50czogcGFyZW50c1xuICAgICAgICAgICAgICAgIH0pLCBub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoICYmIGRvU3ViVHJlZShub2RlLmNoaWxkcmVuLCBkZXB0aCArIDEsIHBhcmVudHMgPyBwYXJlbnRzLmNvbmNhdChbIG5vZGVNYXBbbm9kZUtleV0gXSkgOiBbIG5vZGVNYXBbbm9kZUtleV0gXSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkb1N1YlRyZWUob3JpZ2luYWxOb2RlcywgMCwgbnVsbCksIG9yaWdpbmFsTGlua3MuZm9yRWFjaCgoKGxpbmssIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtsaW5rLnNvdXJjZX0tJHtsaW5rLnRhcmdldH1gLCBsaW5rRGF0dW0gPSBwaWNrV2l0aG91dChsaW5rLCBbIFwicGFyZW50c1wiIF0pO1xuICAgICAgICAgICAgaWYgKGxpbmtEYXR1bS5wYXJlbnRzID0gbGluay5wYXJlbnRzLm1hcCgobm9kZSA9PiBwaWNrV2l0aG91dChub2RlLCBbIFwic291cmNlTGlua3NcIiwgXCJ0YXJnZXRMaW5rc1wiIF0pKSksIFxuICAgICAgICAgICAgbGlua01hcFtrZXldKSByZXR1cm4gbGlua01hcFtrZXldLnZhbHVlICs9IHRvVmFsaWROdW1iZXIobGluay52YWx1ZSksIHZvaWQgbGlua01hcFtrZXldLmRhdHVtLnB1c2gobGlua0RhdHVtKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0ge1xuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICBrZXk6IGAke2xpbmsuc291cmNlfS0ke2xpbmsudGFyZ2V0fWAsXG4gICAgICAgICAgICAgICAgc291cmNlOiBsaW5rLnNvdXJjZSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGxpbmsudGFyZ2V0LFxuICAgICAgICAgICAgICAgIGRhdHVtOiBbIGxpbmtEYXR1bSBdLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBsaW5rLnZhbHVlLFxuICAgICAgICAgICAgICAgIHBhcmVudHM6IGxpbmsucGFyZW50cy5tYXAoKHBhcmVudCA9PiBwYXJlbnQua2V5KSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsaW5rcy5wdXNoKGxpbmtFbGVtZW50KSwgbm9kZU1hcFtsaW5rLnNvdXJjZV0uc291cmNlTGlua3MucHVzaChsaW5rRWxlbWVudCksIG5vZGVNYXBbbGluay50YXJnZXRdLnRhcmdldExpbmtzLnB1c2gobGlua0VsZW1lbnQpLCBcbiAgICAgICAgICAgIGxpbmtNYXBba2V5XSA9IGxpbmtFbGVtZW50O1xuICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIG5vZGVzOiBub2RlcyxcbiAgICAgICAgICAgIGxpbmtzOiBsaW5rcyxcbiAgICAgICAgICAgIG5vZGVNYXA6IG5vZGVNYXBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29tcHV0ZVNvdXJjZVRhcmdldE5vZGVMaW5rcyhkYXRhKSB7XG4gICAgICAgIGNvbnN0IG5vZGVzID0gW10sIGxpbmtzID0gW10sIG5vZGVNYXAgPSB7fTtcbiAgICAgICAgZGF0YS5ub2RlcyAmJiBkYXRhLm5vZGVzLmZvckVhY2goKChub2RlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm9kZUVsZW1lbnQgPSB7XG4gICAgICAgICAgICAgICAgZGVwdGg6IC0xLFxuICAgICAgICAgICAgICAgIGRhdHVtOiBub2RlLFxuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICBrZXk6IHRoaXMuX2dldE5vZGVLZXkgPyB0aGlzLl9nZXROb2RlS2V5KG5vZGUpIDogaW5kZXgsXG4gICAgICAgICAgICAgICAgdmFsdWU6IG5vZGUudmFsdWUsXG4gICAgICAgICAgICAgICAgc291cmNlTGlua3M6IFtdLFxuICAgICAgICAgICAgICAgIHRhcmdldExpbmtzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG5vZGVNYXBbbm9kZUVsZW1lbnQua2V5XSA9IG5vZGVFbGVtZW50LCBub2Rlcy5wdXNoKG5vZGVFbGVtZW50KTtcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBpbnZhbGlkTGlua3MgPSBbXTtcbiAgICAgICAgcmV0dXJuIGRhdGEubGlua3MuZm9yRWFjaCgoKGxpbmssIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoYXNTb3VyY2UgPSAhaXNOaWwobGluay5zb3VyY2UpLCBoYXNUYXJnZXQgPSAhaXNOaWwobGluay50YXJnZXQpO1xuICAgICAgICAgICAgaWYgKGRhdGEubm9kZXMgJiYgKCFub2RlTWFwW2xpbmsuc291cmNlXSB8fCAhbm9kZU1hcFtsaW5rLnRhcmdldF0pKSByZXR1cm47XG4gICAgICAgICAgICBkYXRhLm5vZGVzIHx8ICFoYXNTb3VyY2UgfHwgbm9kZU1hcFtsaW5rLnNvdXJjZV0gfHwgKG5vZGVNYXBbbGluay5zb3VyY2VdID0ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgZGVwdGg6IC0xLFxuICAgICAgICAgICAgICAgIGluZGV4OiBub2Rlcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAga2V5OiBsaW5rLnNvdXJjZSxcbiAgICAgICAgICAgICAgICBkYXR1bTogbnVsbCxcbiAgICAgICAgICAgICAgICBzb3VyY2VMaW5rczogW10sXG4gICAgICAgICAgICAgICAgdGFyZ2V0TGlua3M6IFtdXG4gICAgICAgICAgICB9LCBub2Rlcy5wdXNoKG5vZGVNYXBbbGluay5zb3VyY2VdKSksIGRhdGEubm9kZXMgfHwgIWhhc1RhcmdldCB8fCBub2RlTWFwW2xpbmsudGFyZ2V0XSB8fCAobm9kZU1hcFtsaW5rLnRhcmdldF0gPSB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBkZXB0aDogLTEsXG4gICAgICAgICAgICAgICAgaW5kZXg6IG5vZGVzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBrZXk6IGxpbmsudGFyZ2V0LFxuICAgICAgICAgICAgICAgIGRhdHVtOiBudWxsLFxuICAgICAgICAgICAgICAgIHNvdXJjZUxpbmtzOiBbXSxcbiAgICAgICAgICAgICAgICB0YXJnZXRMaW5rczogW11cbiAgICAgICAgICAgIH0sIG5vZGVzLnB1c2gobm9kZU1hcFtsaW5rLnRhcmdldF0pKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0ge1xuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IGxpbmsuc291cmNlLFxuICAgICAgICAgICAgICAgIHRhcmdldDogbGluay50YXJnZXQsXG4gICAgICAgICAgICAgICAgZGF0dW06IGxpbmssXG4gICAgICAgICAgICAgICAgdmFsdWU6IGxpbmsudmFsdWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGl2aWRlTm9kZVZhbHVlVG9MaW5rICYmIGlzTmlsKGxpbmsudmFsdWUpICYmIGludmFsaWRMaW5rcy5wdXNoKGxpbmtFbGVtZW50KSwgXG4gICAgICAgICAgICBsaW5rcy5wdXNoKGxpbmtFbGVtZW50KSwgaGFzU291cmNlICYmIG5vZGVNYXBbbGluay5zb3VyY2VdLnNvdXJjZUxpbmtzLnB1c2gobGlua0VsZW1lbnQpLCBcbiAgICAgICAgICAgIGhhc1RhcmdldCAmJiBub2RlTWFwW2xpbmsudGFyZ2V0XS50YXJnZXRMaW5rcy5wdXNoKGxpbmtFbGVtZW50KTtcbiAgICAgICAgfSkpLCB0aGlzLm9wdGlvbnMuZGl2aWRlTm9kZVZhbHVlVG9MaW5rICYmIGludmFsaWRMaW5rcy5sZW5ndGggJiYgaW52YWxpZExpbmtzLmZvckVhY2goKGxpbmsgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gWyBjYWxjRGl2aWRlVmFsdWUobm9kZU1hcFtsaW5rLnNvdXJjZV0pLCBjYWxjRGl2aWRlVmFsdWUobm9kZU1hcFtsaW5rLnRhcmdldF0sICEwKSBdLmZpbHRlcigoZW50cnkgPT4gIWlzTmlsKGVudHJ5KSkpO1xuICAgICAgICAgICAgdmFsdWVzLmxlbmd0aCAmJiAobGluay52YWx1ZSA9IG1pbkluQXJyYXkodmFsdWVzKSk7XG4gICAgICAgIH0pKSwge1xuICAgICAgICAgICAgbm9kZU1hcDogbm9kZU1hcCxcbiAgICAgICAgICAgIG5vZGVzOiBub2RlcyxcbiAgICAgICAgICAgIGxpbmtzOiBsaW5rc1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb21wdXRlTm9kZUxpbmtzKGRhdGEpIHtcbiAgICAgICAgbGV0IHJlcztcbiAgICAgICAgXCJsaW5rc1wiIGluIGRhdGEgPyByZXMgPSB0aGlzLmNvbXB1dGVTb3VyY2VUYXJnZXROb2RlTGlua3MoZGF0YSkgOiAodGhpcy5faXNIaWVyYXJjaGljID0gITAsIFxuICAgICAgICByZXMgPSB0aGlzLmNvbXB1dGVIaWVyYXJjaGljTm9kZUxpbmtzKGRhdGEubm9kZXMpKTtcbiAgICAgICAgbGV0IG5vZGVzID0gcmVzLm5vZGVzO1xuICAgICAgICBjb25zdCBsaW5rcyA9IHJlcy5saW5rcztcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5saW5rU29ydEJ5KSBmb3IgKGxldCBpID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIG5vZGVzW2ldLnNvdXJjZUxpbmtzLnNvcnQodGhpcy5vcHRpb25zLmxpbmtTb3J0QnkpLCBcbiAgICAgICAgbm9kZXNbaV0udGFyZ2V0TGlua3Muc29ydCh0aGlzLm9wdGlvbnMubGlua1NvcnRCeSk7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZHJvcElzb2xhdGVkTm9kZSAmJiAobm9kZXMgPSBub2Rlcy5maWx0ZXIoKG5vZGUgPT4gbm9kZS50YXJnZXRMaW5rcy5sZW5ndGggfHwgbm9kZS5zb3VyY2VMaW5rcy5sZW5ndGgpKSksIFxuICAgICAgICB7XG4gICAgICAgICAgICBub2Rlczogbm9kZXMsXG4gICAgICAgICAgICBsaW5rczogbGlua3MsXG4gICAgICAgICAgICBub2RlTWFwOiByZXMubm9kZU1hcFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb21wdXRlTm9kZVZhbHVlcyhub2Rlcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIG5vZGUudmFsdWUgPSBNYXRoLm1heChpc05pbChub2RlLnZhbHVlKSA/IDAgOiB0b1ZhbGlkTnVtYmVyKG5vZGUudmFsdWUpLCBub2RlLnNvdXJjZUxpbmtzLnJlZHVjZSgoKHN1bSwgbGluaykgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VtICsgKG51bGwgIT09IChfYSA9IHRvVmFsaWROdW1iZXIobGluay52YWx1ZSkpICYmIHZvaWQgMCAhPT0gX2EgPyBfYSA6IDApO1xuICAgICAgICAgICAgfSksIDApLCBub2RlLnRhcmdldExpbmtzLnJlZHVjZSgoKHN1bSwgbGluaykgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VtICsgKG51bGwgIT09IChfYSA9IHRvVmFsaWROdW1iZXIobGluay52YWx1ZSkpICYmIHZvaWQgMCAhPT0gX2EgPyBfYSA6IDApO1xuICAgICAgICAgICAgfSksIDApKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wdXRlTm9kZURlcHRocyhub2Rlcykge1xuICAgICAgICBjb25zdCBuID0gbm9kZXMubGVuZ3RoO1xuICAgICAgICBsZXQgbmV4dCwgbmV4dE1hcCwgY3VycmVudCA9IG5vZGVzLCBkZXB0aCA9IDA7XG4gICAgICAgIGZvciAoO2N1cnJlbnQubGVuZ3RoICYmIGRlcHRoIDwgbjsgKSB7XG4gICAgICAgICAgICBuZXh0ID0gW10sIG5leHRNYXAgPSB7fTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBjdXJMZW4gPSBjdXJyZW50Lmxlbmd0aDsgaSA8IGN1ckxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGN1cnJlbnRbaV07XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUgJiYgKG5vZGUuZGVwdGggPSBkZXB0aCwgbm9kZS5zb3VyY2VMaW5rcyAmJiBub2RlLnNvdXJjZUxpbmtzLmxlbmd0aCkpIGZvciAobGV0IGogPSAwLCBsaW5rTGVuID0gbm9kZS5zb3VyY2VMaW5rcy5sZW5ndGg7IGogPCBsaW5rTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluayA9IG5vZGUuc291cmNlTGlua3Nbal07XG4gICAgICAgICAgICAgICAgICAgIG5leHRNYXBbbGluay50YXJnZXRdIHx8IChuZXh0LnB1c2godGhpcy5fbm9kZU1hcFtsaW5rLnRhcmdldF0pLCBuZXh0TWFwW2xpbmsudGFyZ2V0XSA9ICEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50ID0gbmV4dCwgZGVwdGggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBkZXB0aCA+IG4gJiYgdGhpcy5fbG9nZ2VyLndhcm4oXCJFcnJvcjogdGhlcmUgaXMgYSBjaXJjdWxhciBsaW5rXCIpLCB0aGlzLl9tYXhEZXB0aCA9IGRlcHRoO1xuICAgIH1cbiAgICBjb21wdXRlTm9kZUVuZERlcHRocyhub2Rlcykge1xuICAgICAgICBjb25zdCBuID0gbm9kZXMubGVuZ3RoO1xuICAgICAgICBsZXQgbmV4dCwgbmV4dE1hcCwgY3VycmVudCA9IG5vZGVzLCBkZXB0aCA9IDA7XG4gICAgICAgIGZvciAoO2N1cnJlbnQubGVuZ3RoICYmIGRlcHRoIDwgbjsgKSB7XG4gICAgICAgICAgICBuZXh0ID0gW10sIG5leHRNYXAgPSB7fTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBjdXJMZW4gPSBjdXJyZW50Lmxlbmd0aDsgaSA8IGN1ckxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGN1cnJlbnRbaV07XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5lbmREZXB0aCA9IGRlcHRoO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgbGlua0xlbiA9IG5vZGUudGFyZ2V0TGlua3MubGVuZ3RoOyBqIDwgbGlua0xlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gbm9kZS50YXJnZXRMaW5rc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRNYXBbbGluay5zb3VyY2VdIHx8IChuZXh0LnB1c2godGhpcy5fbm9kZU1hcFtsaW5rLnNvdXJjZV0pLCBuZXh0TWFwW2xpbmsuc291cmNlXSA9ICEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnQgPSBuZXh0LCBkZXB0aCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGRlcHRoID4gbiAmJiB0aGlzLl9sb2dnZXIud2FybihcIkVycm9yOiB0aGVyZSBpcyBhIGNpcmN1bGFyIGxpbmtcIik7XG4gICAgfVxuICAgIGNvbXB1dGVOb2RlTGF5ZXJzKG5vZGVzKSB7XG4gICAgICAgIGNvbnN0IG5vZGVXaWR0aE9wdGlvbiA9IHRoaXMub3B0aW9ucy5ub2RlV2lkdGgsIGxpbmtXaWR0aE9wdGlvbiA9IHRoaXMub3B0aW9ucy5saW5rV2lkdGgsIG1pblN0ZXBXaWR0aCA9IHRoaXMub3B0aW9ucy5taW5TdGVwV2lkdGgsIHdpZHRoID0gdGhpcy5fdmlld0JveC53aWR0aDtcbiAgICAgICAgbGV0IG5vZGVXaWR0aCA9IG51bGwsIGxpbmtXaWR0aCA9IG51bGwsIGlzRXZlbldpZHRoID0gITE7XG4gICAgICAgIGlmIChpc1N0cmluZyhub2RlV2lkdGhPcHRpb24pKSB7XG4gICAgICAgICAgICBjb25zdCByYXRpbyA9IGNsYW1wKHBhcnNlRmxvYXQobm9kZVdpZHRoT3B0aW9uLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMCwgMCwgMSk7XG4gICAgICAgICAgICBsZXQgc3RlcFdpZHRoID0gd2lkdGggLyAodGhpcy5fbWF4RGVwdGggLSAxICsgcmF0aW8pO1xuICAgICAgICAgICAgbWluU3RlcFdpZHRoID4gMCAmJiAoc3RlcFdpZHRoID0gTWF0aC5tYXgobWluU3RlcFdpZHRoLCBzdGVwV2lkdGgpKSwgbm9kZVdpZHRoID0gc3RlcFdpZHRoICogcmF0aW8sIFxuICAgICAgICAgICAgbGlua1dpZHRoID0gc3RlcFdpZHRoICogKDEgLSByYXRpbyksIGlzRXZlbldpZHRoID0gITA7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIobm9kZVdpZHRoT3B0aW9uKSkge1xuICAgICAgICAgICAgaWYgKG5vZGVXaWR0aCA9IG5vZGVXaWR0aE9wdGlvbiwgaXNOdW1iZXIobGlua1dpZHRoT3B0aW9uKSkgbGlua1dpZHRoID0gbGlua1dpZHRoT3B0aW9uOyBlbHNlIGlmIChpc05pbChsaW5rV2lkdGhPcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN0ZXBXaWR0aCA9ICh3aWR0aCAtIG5vZGVXaWR0aE9wdGlvbikgLyAodGhpcy5fbWF4RGVwdGggLSAxKTtcbiAgICAgICAgICAgICAgICBtaW5TdGVwV2lkdGggPiAwICYmIChzdGVwV2lkdGggPSBNYXRoLm1heChtaW5TdGVwV2lkdGgsIHN0ZXBXaWR0aCkpLCBsaW5rV2lkdGggPSBzdGVwV2lkdGggLSBub2RlV2lkdGhPcHRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpc0V2ZW5XaWR0aCA9ICEwO1xuICAgICAgICB9IGVsc2UgaXNGdW5jdGlvbihub2RlV2lkdGhPcHRpb24pICYmIGlzTnVtYmVyKGxpbmtXaWR0aE9wdGlvbikgJiYgKGxpbmtXaWR0aCA9IGxpbmtXaWR0aE9wdGlvbik7XG4gICAgICAgIGNvbnN0IGNvbHVtbnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgICAgICBub2RlLmxheWVyID0gdGhpcy5faXNIaWVyYXJjaGljID8gbm9kZS5kZXB0aCA6IGNsYW1wKE1hdGguZmxvb3IodGhpcy5fYWxpZ25GdW5jKG5vZGUsIHRoaXMuX21heERlcHRoLCB0aGlzLl9ub2RlTWFwKSksIDAsIHRoaXMuX21heERlcHRoIC0gMSk7XG4gICAgICAgICAgICBjb25zdCBsYXllciA9IG5vZGUubGF5ZXI7XG4gICAgICAgICAgICBsYXllciA9PT0gdGhpcy5fbWF4RGVwdGggLSAxICYmIChub2RlLmlzTGFzdExheWVyID0gITApLCBpc0V2ZW5XaWR0aCAmJiAobm9kZS54MCA9IHRoaXMuX3ZpZXdCb3gueDAgKyBsYXllciAqIChub2RlV2lkdGggKyBsaW5rV2lkdGgpLCBcbiAgICAgICAgICAgIG5vZGUueDEgPSBub2RlLngwICsgbm9kZVdpZHRoKSwgY29sdW1uc1tsYXllcl0gPyBjb2x1bW5zW2xheWVyXS5wdXNoKG5vZGUpIDogY29sdW1uc1tsYXllcl0gPSBbIG5vZGUgXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLm5vZGVTb3J0QnkpIGZvciAobGV0IGogPSAwLCBjb2xMZW4gPSBjb2x1bW5zLmxlbmd0aDsgaiA8IGNvbExlbjsgaisrKSBjb2x1bW5zW2pdLnNvcnQodGhpcy5vcHRpb25zLm5vZGVTb3J0QnkpO1xuICAgICAgICBpZiAoIWlzRXZlbldpZHRoICYmIGlzRnVuY3Rpb24obm9kZVdpZHRoT3B0aW9uKSkge1xuICAgICAgICAgICAgbGV0IGN1ckxheWVyWCA9IHRoaXMuX3ZpZXdCb3gueDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX21heERlcHRoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb2x1bW4gPSBjb2x1bW5zW2ldO1xuICAgICAgICAgICAgICAgIGxldCBtYXhOb2RlV2lkdGggPSAwLCBtYXhMaW5rV2lkdGggPSAwO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBjb2xMZW4gPSBjb2x1bW4gJiYgY29sdW1uLmxlbmd0aDsgaiA8IGNvbExlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBjb2x1bW5bal0sIGN1ck5vZGVXaWR0aCA9IG5vZGVXaWR0aE9wdGlvbihub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS54MCA9IGN1ckxheWVyWCwgbm9kZS54MSA9IGN1ckxheWVyWCArIGN1ck5vZGVXaWR0aCwgbWF4Tm9kZVdpZHRoID0gTWF0aC5tYXgobm9kZVdpZHRoLCBjdXJOb2RlV2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VMaW5rcyA9IG5vZGUuc291cmNlTGlua3M7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwLCBsaW5rTGVuID0gc291cmNlTGlua3MubGVuZ3RoOyBrIDwgbGlua0xlbjsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gc291cmNlTGlua3Nba10sIGN1ckxpbmtXaWR0aCA9IGlzRnVuY3Rpb24obGlua1dpZHRoT3B0aW9uKSA/IGxpbmtXaWR0aE9wdGlvbihsaW5rLCB0aGlzLl92aWV3Qm94KSA6IGxpbmtXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heExpbmtXaWR0aCA9IE1hdGgubWF4KG1heExpbmtXaWR0aCwgY3VyTGlua1dpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJMYXllclggKz0gbWF4Tm9kZVdpZHRoICsgbWF4TGlua1dpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgIH1cbiAgICBpbml0aWFsaXplTm9kZUJyZWFkdGhzKGNvbHVtbnMpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWluTGlua0hlaWdodCA9IG51bGwgIT09IChfYSA9IHRoaXMub3B0aW9ucy5taW5MaW5rSGVpZ2h0KSAmJiB2b2lkIDAgIT09IF9hID8gX2EgOiAwO1xuICAgICAgICBsZXQgbWluTm9kZUhlaWdodCA9IG51bGwgIT09IChfYiA9IHRoaXMub3B0aW9ucy5taW5Ob2RlSGVpZ2h0KSAmJiB2b2lkIDAgIT09IF9iID8gX2IgOiAwO1xuICAgICAgICAoaXNOaWwobWluTm9kZUhlaWdodCkgfHwgbWluTm9kZUhlaWdodCA8IG1pbkxpbmtIZWlnaHQpICYmIChtaW5Ob2RlSGVpZ2h0ID0gbWluTGlua0hlaWdodCk7XG4gICAgICAgIGxldCBreSA9IDAsIGdldEdhcFkgPSBudWxsLCBmb3JjZU5vZGVIZWlnaHQgPSBudWxsO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMubm9kZUdhcCkpIGdldEdhcFkgPSB0aGlzLm9wdGlvbnMubm9kZUdhcCwga3kgPSBjb2x1bW5zLnJlZHVjZSgoKHZhbCwgY29sdW1uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdW1WYWx1ZSA9IGNvbHVtbi5yZWR1Y2UoKChzdW0sIG5vZGUpID0+IHN1bSArIG5vZGUudmFsdWUpLCAwKSwgc3VtR2FwWSA9IGNvbHVtbi5yZWR1Y2UoKChzdW0sIG5vZGUpID0+IHN1bSArIHRoaXMub3B0aW9ucy5ub2RlR2FwKG5vZGUpKSwgMCk7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4odmFsLCAodGhpcy5fdmlld0JveC5oZWlnaHQgLSBzdW1HYXBZKSAvIHN1bVZhbHVlKTtcbiAgICAgICAgfSksIDEgLyAwKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBtYXhSb3dDb3VudCA9IGNvbHVtbnMucmVkdWNlKCgoY250LCBjb2x1bW4pID0+IE1hdGgubWF4KGNudCwgY29sdW1uLmxlbmd0aCkpLCAwKSwgbWF4U3RlcEhlaWdodCA9IHRoaXMuX3ZpZXdCb3guaGVpZ2h0IC8gbWF4Um93Q291bnQsIGdhcFkgPSBNYXRoLm1pbih0aGlzLm9wdGlvbnMubm9kZUdhcCwgbWF4U3RlcEhlaWdodCk7XG4gICAgICAgICAgICBpZiAoZ2V0R2FwWSA9ICgpID0+IGdhcFksIHRoaXMuX2dhcFkgPSBnYXBZLCAobWluTm9kZUhlaWdodCArIGdhcFkpICogbWF4Um93Q291bnQgPiB0aGlzLl92aWV3Qm94LmhlaWdodCAmJiAobWluTm9kZUhlaWdodCA9IG1heFN0ZXBIZWlnaHQgLSBnYXBZKSwgXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZXF1YWxOb2RlSGVpZ2h0KSBmb3JjZU5vZGVIZWlnaHQgPSB0aGlzLl92aWV3Qm94LmhlaWdodCAvIG1heFJvd0NvdW50IC0gZ2FwWTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsR2FwWSA9IG1pbk5vZGVIZWlnaHQgPiAwID8gTWF0aC5tYXgoZ2FwWSwgbWluTm9kZUhlaWdodCkgOiBnYXBZO1xuICAgICAgICAgICAgICAgIGt5ID0gY29sdW1ucy5yZWR1Y2UoKCh2YWwsIGNvbHVtbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW1WYWx1ZSA9IGNvbHVtbi5yZWR1Y2UoKChzdW0sIG5vZGUpID0+IHN1bSArIG5vZGUudmFsdWUpLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKHZhbCwgKHRoaXMuX3ZpZXdCb3guaGVpZ2h0IC0gKChjb2x1bW4ubGVuZ3RoIC0gMSkgKiBjYWxHYXBZICsgbWluTm9kZUhlaWdodCkpIC8gc3VtVmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pLCAxIC8gMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNTdGFydEdhcCA9IFwic3RhcnRcIiA9PT0gdGhpcy5vcHRpb25zLmdhcFBvc2l0aW9uLCBpc01pZGRsZUdhcCA9ICFpc1N0YXJ0R2FwICYmIFwiZW5kXCIgIT09IHRoaXMub3B0aW9ucy5nYXBQb3NpdGlvbiwgZ2V0Tm9kZUhlaWdodCA9IGlzTnVtYmVyKHRoaXMub3B0aW9ucy5ub2RlSGVpZ2h0KSA/IG5vZGUgPT4gdGhpcy5vcHRpb25zLm5vZGVIZWlnaHQgOiBpc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5ub2RlSGVpZ2h0KSA/IHRoaXMub3B0aW9ucy5ub2RlSGVpZ2h0IDogZm9yY2VOb2RlSGVpZ2h0ID4gMCA/IG5vZGUgPT4gZm9yY2VOb2RlSGVpZ2h0IDogbm9kZSA9PiBNYXRoLm1heChub2RlLnZhbHVlICoga3ksIDApLCBnZXRMaW5rSGVpZ2h0ID0gaXNOdW1iZXIodGhpcy5vcHRpb25zLmxpbmtIZWlnaHQpID8gKCkgPT4gdGhpcy5vcHRpb25zLmxpbmtIZWlnaHQgOiBpc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5saW5rSGVpZ2h0KSA/IHRoaXMub3B0aW9ucy5saW5rSGVpZ2h0IDogKGxpbmssIHNvdXJjZU5vZGUsIHNvdXJjZU5vZGVIZWlnaHQpID0+IE1hdGgubWF4KHNvdXJjZU5vZGUudmFsdWUgPyBzb3VyY2VOb2RlSGVpZ2h0ICogbGlua0NsYW1wZShsaW5rLnZhbHVlIC8gc291cmNlTm9kZS52YWx1ZSkgOiAwLCBtaW5MaW5rSGVpZ2h0LCAwKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGNvbHVtbkNvdW50ID0gY29sdW1ucy5sZW5ndGg7IGkgPCBjb2x1bW5Db3VudDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlcyA9IGNvbHVtbnNbaV07XG4gICAgICAgICAgICBpZiAoIW5vZGVzIHx8ICFub2Rlcy5sZW5ndGgpIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IHkgPSB0aGlzLl92aWV3Qm94LnkwLCBnYXBZID0gMCwgbm9kZUhlaWdodCA9IDAsIGNhbGN1bGF0ZWROb2RlSGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBsZW4gPSBub2Rlcy5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tqXTtcbiAgICAgICAgICAgICAgICBnYXBZID0gZ2V0R2FwWShub2RlKSwgaXNTdGFydEdhcCAmJiAoeSArPSBnYXBZKSwgY2FsY3VsYXRlZE5vZGVIZWlnaHQgPSBnZXROb2RlSGVpZ2h0KG5vZGUpLCBcbiAgICAgICAgICAgICAgICBub2RlSGVpZ2h0ID0gTWF0aC5tYXgoY2FsY3VsYXRlZE5vZGVIZWlnaHQsIG1pbk5vZGVIZWlnaHQpLCBub2RlLnkwID0geSwgbm9kZS55MSA9IHkgKyBub2RlSGVpZ2h0LCBcbiAgICAgICAgICAgICAgICB5ID0gaXNTdGFydEdhcCA/IG5vZGUueTEgOiBub2RlLnkxICsgZ2FwWTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMCwgbGlua0xlbiA9IG5vZGUuc291cmNlTGlua3MubGVuZ3RoOyBrIDwgbGlua0xlbjsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBub2RlLnNvdXJjZUxpbmtzW2tdO1xuICAgICAgICAgICAgICAgICAgICBsaW5rLnRoaWNrbmVzcyA9IGdldExpbmtIZWlnaHQobGluaywgbm9kZSwgY2FsY3VsYXRlZE5vZGVIZWlnaHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBkZWx0YVkgPSB0aGlzLl92aWV3Qm94LnkxIC0geSArIChpc01pZGRsZUdhcCA/IGdhcFkgOiAwKTtcbiAgICAgICAgICAgIGlmIChkZWx0YVkgPiAwKSBpZiAoXCJzdGFydFwiID09PSB0aGlzLm9wdGlvbnMuY3Jvc3NOb2RlQWxpZ24pIDsgZWxzZSBpZiAoXCJlbmRcIiA9PT0gdGhpcy5vcHRpb25zLmNyb3NzTm9kZUFsaWduKSBmb3IgKGxldCBqID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbal07XG4gICAgICAgICAgICAgICAgbm9kZS55MCArPSBkZWx0YVksIG5vZGUueTEgKz0gZGVsdGFZO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWx0YVkgLz0gbm9kZXMubGVuZ3RoICsgMTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2pdO1xuICAgICAgICAgICAgICAgICAgICBub2RlLnkwICs9IGRlbHRhWSAqIChqICsgMSksIG5vZGUueTEgKz0gZGVsdGFZICogKGogKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlbHRhWSA8IDAgJiYgbm9kZXMubGVuZ3RoID4gMSAmJiAoZGVsdGFZIC89IG5vZGVzLmxlbmd0aCAtIDEsIGdhcFkgKyBkZWx0YVkgPj0gMCkpIHtcbiAgICAgICAgICAgICAgICBnYXBZICs9IGRlbHRhWSwgdGhpcy5fZ2FwWSA9IE1hdGgubWluKGdhcFkpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAxLCBsZW4gPSBub2Rlcy5sZW5ndGg7IGogPCBsZW47ICsraikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbal07XG4gICAgICAgICAgICAgICAgICAgIG5vZGUueTAgKz0gZGVsdGFZICogaiwgbm9kZS55MSArPSBkZWx0YVkgKiBqO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVvcmRlckxpbmtzKG5vZGVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wdXRlTm9kZUJyZWFkdGhzKG5vZGVzKSB7XG4gICAgICAgIGNvbnN0IGNvbHVtbnMgPSB0aGlzLmNvbXB1dGVOb2RlTGF5ZXJzKG5vZGVzKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplTm9kZUJyZWFkdGhzKGNvbHVtbnMpO1xuICAgICAgICBjb25zdCBpdGVyYXRpb25zID0gdGhpcy5vcHRpb25zLml0ZXJhdGlvbnM7XG4gICAgICAgIGlmICghdGhpcy5faXNIaWVyYXJjaGljICYmICFpc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5zZXROb2RlTGF5ZXIpICYmICFpc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5ub2RlR2FwKSkgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGFscGhhID0gTWF0aC5wb3coLjk5LCBpKSwgYmV0YSA9IE1hdGgubWF4KDEgLSBhbHBoYSwgKGkgKyAxKSAvIGl0ZXJhdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5yZWxheFJpZ2h0VG9MZWZ0KGNvbHVtbnMsIGFscGhhLCBiZXRhKSwgdGhpcy5yZWxheExlZnRUb1JpZ2h0KGNvbHVtbnMsIGFscGhhLCBiZXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICB9XG4gICAgcmVsYXhMZWZ0VG9SaWdodChjb2x1bW5zLCBhbHBoYSwgYmV0YSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMSwgbiA9IGNvbHVtbnMubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBjb2x1bW4gPSBjb2x1bW5zW2ldO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDAsIGNvbExlbiA9IGNvbHVtbi5sZW5ndGg7IGogPCBjb2xMZW47IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGNvbHVtbltqXTtcbiAgICAgICAgICAgICAgICBsZXQgeSA9IDAsIHcgPSAwO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwLCBsaW5rTGVuID0gdGFyZ2V0LnRhcmdldExpbmtzLmxlbmd0aDsgayA8IGxpbmtMZW47IGsrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gdGFyZ2V0LnRhcmdldExpbmtzW2tdLCB2ID0gbGluay52YWx1ZSAqICh0YXJnZXQubGF5ZXIgLSB0aGlzLl9ub2RlTWFwW2xpbmsuc291cmNlXS5sYXllcik7XG4gICAgICAgICAgICAgICAgICAgIHkgKz0gdGhpcy50YXJnZXRUb3AodGhpcy5fbm9kZU1hcFtsaW5rLnNvdXJjZV0sIHRhcmdldCkgKiB2LCB3ICs9IHY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghKHcgPiAwKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgY29uc3QgZHkgPSAoeSAvIHcgLSB0YXJnZXQueTApICogYWxwaGE7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnkwICs9IGR5LCB0YXJnZXQueTEgKz0gZHksIHRoaXMucmVvcmRlck5vZGVMaW5rcyh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNOaWwodGhpcy5vcHRpb25zLm5vZGVTb3J0QnkpICYmIGNvbHVtbi5zb3J0KGFzY2VuZGluZ05vZGVCcmVhZHRoKSwgdGhpcy5yZXNvbHZlQ29sbGlzaW9ucyhjb2x1bW4sIGJldGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbGF4UmlnaHRUb0xlZnQoY29sdW1ucywgYWxwaGEsIGJldGEpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGNvbHVtbnMubGVuZ3RoIC0gMjsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbiA9IGNvbHVtbnNbaV07XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgY29sTGVuID0gY29sdW1uLmxlbmd0aDsgaiA8IGNvbExlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc291cmNlID0gY29sdW1uW2pdO1xuICAgICAgICAgICAgICAgIGxldCB5ID0gMCwgdyA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDAsIGxpbmtMZW4gPSBzb3VyY2Uuc291cmNlTGlua3MubGVuZ3RoOyBrIDwgbGlua0xlbjsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBzb3VyY2Uuc291cmNlTGlua3Nba10sIHYgPSBsaW5rLnZhbHVlICogKHRoaXMuX25vZGVNYXBbbGluay50YXJnZXRdLmxheWVyIC0gc291cmNlLmxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgeSArPSB0aGlzLnNvdXJjZVRvcChzb3VyY2UsIHRoaXMuX25vZGVNYXBbbGluay50YXJnZXRdKSAqIHYsIHcgKz0gdjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEodyA+IDApKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBkeSA9ICh5IC8gdyAtIHNvdXJjZS55MCkgKiBhbHBoYTtcbiAgICAgICAgICAgICAgICBzb3VyY2UueTAgKz0gZHksIHNvdXJjZS55MSArPSBkeSwgdGhpcy5yZW9yZGVyTm9kZUxpbmtzKHNvdXJjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2b2lkIDAgPT09IHRoaXMub3B0aW9ucy5ub2RlU29ydEJ5ICYmIGNvbHVtbi5zb3J0KGFzY2VuZGluZ05vZGVCcmVhZHRoKSwgdGhpcy5yZXNvbHZlQ29sbGlzaW9ucyhjb2x1bW4sIGJldGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc29sdmVDb2xsaXNpb25zKG5vZGVzLCBhbHBoYSkge1xuICAgICAgICBjb25zdCBpID0gbm9kZXMubGVuZ3RoID4+IDEsIHN1YmplY3QgPSBub2Rlc1tpXTtcbiAgICAgICAgdGhpcy5yZXNvbHZlQ29sbGlzaW9uc0JvdHRvbVRvVG9wKG5vZGVzLCBzdWJqZWN0LnkwIC0gdGhpcy5fZ2FwWSwgaSAtIDEsIGFscGhhKSwgXG4gICAgICAgIHRoaXMucmVzb2x2ZUNvbGxpc2lvbnNUb3BUb0JvdHRvbShub2Rlcywgc3ViamVjdC55MSArIHRoaXMuX2dhcFksIGkgKyAxLCBhbHBoYSksIFxuICAgICAgICB0aGlzLnJlc29sdmVDb2xsaXNpb25zQm90dG9tVG9Ub3Aobm9kZXMsIHRoaXMuX3ZpZXdCb3gueTEsIG5vZGVzLmxlbmd0aCAtIDEsIGFscGhhKSwgXG4gICAgICAgIHRoaXMucmVzb2x2ZUNvbGxpc2lvbnNUb3BUb0JvdHRvbShub2RlcywgdGhpcy5fdmlld0JveC55MCwgMCwgYWxwaGEpO1xuICAgIH1cbiAgICByZXNvbHZlQ29sbGlzaW9uc1RvcFRvQm90dG9tKG5vZGVzLCB5LCBpLCBhbHBoYSkge1xuICAgICAgICBmb3IgKDtpIDwgbm9kZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXSwgZHkgPSAoeSAtIG5vZGUueTApICogYWxwaGE7XG4gICAgICAgICAgICBkeSA+IDFlLTYgJiYgKG5vZGUueTAgKz0gZHksIG5vZGUueTEgKz0gZHkpLCB5ID0gbm9kZS55MSArIHRoaXMuX2dhcFk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzb2x2ZUNvbGxpc2lvbnNCb3R0b21Ub1RvcChub2RlcywgeSwgaSwgYWxwaGEpIHtcbiAgICAgICAgZm9yICg7aSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXSwgZHkgPSAobm9kZS55MSAtIHkpICogYWxwaGE7XG4gICAgICAgICAgICBkeSA+IDFlLTYgJiYgKG5vZGUueTAgLT0gZHksIG5vZGUueTEgLT0gZHkpLCB5ID0gbm9kZS55MCAtIHRoaXMuX2dhcFk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGFyZ2V0VG9wKHNvdXJjZSwgdGFyZ2V0KSB7XG4gICAgICAgIGxldCBpLCBsZW4sIGxpbmssIHkgPSBzb3VyY2UueTAgLSAoc291cmNlLnNvdXJjZUxpbmtzLmxlbmd0aCAtIDEpICogdGhpcy5fZ2FwWSAvIDI7XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHNvdXJjZS5zb3VyY2VMaW5rcy5sZW5ndGg7IGkgPCBsZW4gJiYgKGxpbmsgPSBzb3VyY2Uuc291cmNlTGlua3NbaV0sIFxuICAgICAgICBsaW5rLnRhcmdldCAhPT0gdGFyZ2V0LmtleSk7IGkrKykgeSArPSBsaW5rLnRoaWNrbmVzcyArIHRoaXMuX2dhcFk7XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHRhcmdldC50YXJnZXRMaW5rcy5sZW5ndGg7IGkgPCBsZW4gJiYgKGxpbmsgPSB0YXJnZXQudGFyZ2V0TGlua3NbaV0sIFxuICAgICAgICBsaW5rLnNvdXJjZSAhPT0gc291cmNlLmtleSk7IGkrKykgeSAtPSBsaW5rLnRoaWNrbmVzcztcbiAgICAgICAgcmV0dXJuIHk7XG4gICAgfVxuICAgIHNvdXJjZVRvcChzb3VyY2UsIHRhcmdldCkge1xuICAgICAgICBsZXQgaSwgbGVuLCBsaW5rLCB5ID0gdGFyZ2V0LnkwIC0gKHRhcmdldC50YXJnZXRMaW5rcy5sZW5ndGggLSAxKSAqIHRoaXMuX2dhcFkgLyAyO1xuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSB0YXJnZXQudGFyZ2V0TGlua3MubGVuZ3RoOyBpIDwgbGVuICYmIChsaW5rID0gdGFyZ2V0LnRhcmdldExpbmtzW2ldLCBcbiAgICAgICAgbGluay5zb3VyY2UgIT09IHNvdXJjZS5rZXkpOyBpKyspIHkgKz0gbGluay50aGlja25lc3MgKyB0aGlzLl9nYXBZO1xuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBzb3VyY2Uuc291cmNlTGlua3MubGVuZ3RoOyBpIDwgbGVuICYmIChsaW5rID0gc291cmNlLnNvdXJjZUxpbmtzW2ldLCBcbiAgICAgICAgbGluay50YXJnZXQgIT09IHRhcmdldC5rZXkpOyBpKyspIHkgLT0gbGluay50aGlja25lc3M7XG4gICAgICAgIHJldHVybiB5O1xuICAgIH1cbiAgICBjb21wdXRlTGlua0JyZWFkdGhzTm9PdmVybGFwKG5vZGVzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBub2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgbGV0IHkwID0gbm9kZS55MCwgcmVhY2hCb3R0b20gPSAhMTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBsaW5rTGVuID0gbm9kZS5zb3VyY2VMaW5rcy5sZW5ndGg7IGogPCBsaW5rTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gbm9kZS5zb3VyY2VMaW5rc1tqXTtcbiAgICAgICAgICAgICAgICByZWFjaEJvdHRvbSB8fCAobGluay55MCA9IHkwICsgbGluay50aGlja25lc3MgLyAyKSwgbGluay54MCA9IG5vZGUueDEsIHkwICsgbGluay50aGlja25lc3MgPiBub2RlLnkxIHx8IHJlYWNoQm90dG9tID8gKGxpbmsueTAgPSBub2RlLnkxIC0gbGluay50aGlja25lc3MgLyAyLCBcbiAgICAgICAgICAgICAgICByZWFjaEJvdHRvbSA9ICEwKSA6IHkwICs9IGxpbmsudGhpY2tuZXNzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHkxID0gbm9kZS55MDtcbiAgICAgICAgICAgIHJlYWNoQm90dG9tID0gITE7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgbGlua0xlbiA9IG5vZGUudGFyZ2V0TGlua3MubGVuZ3RoOyBqIDwgbGlua0xlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluayA9IG5vZGUudGFyZ2V0TGlua3Nbal07XG4gICAgICAgICAgICAgICAgcmVhY2hCb3R0b20gfHwgKGxpbmsueTEgPSB5MSArIGxpbmsudGhpY2tuZXNzIC8gMiksIGxpbmsueDEgPSBub2RlLngwLCB5MSArIGxpbmsudGhpY2tuZXNzID4gbm9kZS55MSB8fCByZWFjaEJvdHRvbSA/IChsaW5rLnkxID0gbm9kZS55MSAtIGxpbmsudGhpY2tuZXNzIC8gMiwgXG4gICAgICAgICAgICAgICAgcmVhY2hCb3R0b20gPSAhMCkgOiB5MSArPSBsaW5rLnRoaWNrbmVzcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wdXRlTGlua0JyZWFkdGhzT3ZlcmxhcChub2Rlcykge1xuICAgICAgICBjb25zdCBsaW5rT3ZlcmxhcCA9IHRoaXMub3B0aW9ucy5saW5rT3ZlcmxhcDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV0sIHBvcyA9IFwic3RhcnRcIiA9PT0gbGlua092ZXJsYXAgPyBub2RlLnkwIDogXCJlbmRcIiA9PT0gbGlua092ZXJsYXAgPyBub2RlLnkxIDogKG5vZGUueTAgKyBub2RlLnkxKSAvIDIsIHNpZ24gPSBcInN0YXJ0XCIgPT09IGxpbmtPdmVybGFwID8gLjUgOiBcImVuZFwiID09PSBsaW5rT3ZlcmxhcCA/IC0uNSA6IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgbGlua0xlbiA9IG5vZGUuc291cmNlTGlua3MubGVuZ3RoOyBqIDwgbGlua0xlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluayA9IG5vZGUuc291cmNlTGlua3Nbal07XG4gICAgICAgICAgICAgICAgbGluay55MCA9IHBvcyArIHNpZ24gKiBsaW5rLnRoaWNrbmVzcywgbGluay54MCA9IG5vZGUueDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgbGlua0xlbiA9IG5vZGUudGFyZ2V0TGlua3MubGVuZ3RoOyBqIDwgbGlua0xlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluayA9IG5vZGUudGFyZ2V0TGlua3Nbal07XG4gICAgICAgICAgICAgICAgbGluay55MSA9IHBvcyArIHNpZ24gKiBsaW5rLnRoaWNrbmVzcywgbGluay54MSA9IG5vZGUueDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcHV0ZUxpbmtCcmVhZHRocyhub2Rlcykge1xuICAgICAgICB0aGlzLm9wdGlvbnMubGlua092ZXJsYXAgPyB0aGlzLmNvbXB1dGVMaW5rQnJlYWR0aHNPdmVybGFwKG5vZGVzKSA6IHRoaXMuY29tcHV0ZUxpbmtCcmVhZHRoc05vT3ZlcmxhcChub2Rlcyk7XG4gICAgfVxuICAgIHJlb3JkZXJOb2RlTGlua3Mobm9kZSkge1xuICAgICAgICBpZiAoaXNOaWwodGhpcy5vcHRpb25zLmxpbmtTb3J0QnkpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRMaW5rcyA9IG5vZGUudGFyZ2V0TGlua3MsIHNvdXJjZUxpbmtzID0gbm9kZS5zb3VyY2VMaW5rcztcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBsaW5rTGVuID0gdGFyZ2V0TGlua3MubGVuZ3RoOyBqIDwgbGlua0xlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluayA9IHRhcmdldExpbmtzW2pdO1xuICAgICAgICAgICAgICAgIHRoaXMuX25vZGVNYXBbbGluay5zb3VyY2VdLnNvdXJjZUxpbmtzLnNvcnQodGhpcy5fYXNjZW5kaW5nVGFyZ2V0QnJlYWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgbGlua0xlbiA9IHNvdXJjZUxpbmtzLmxlbmd0aDsgaiA8IGxpbmtMZW47IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBzb3VyY2VMaW5rc1tqXTtcbiAgICAgICAgICAgICAgICB0aGlzLl9ub2RlTWFwW2xpbmsudGFyZ2V0XS50YXJnZXRMaW5rcy5zb3J0KHRoaXMuX2FzY2VuZGluZ1NvdXJjZUJyZWFkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlb3JkZXJMaW5rcyhub2Rlcykge1xuICAgICAgICBpZiAoaXNOaWwodGhpcy5vcHRpb25zLmxpbmtTb3J0QnkpKSBmb3IgKGxldCBpID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIG5vZGUuc291cmNlTGlua3Muc29ydCh0aGlzLl9hc2NlbmRpbmdUYXJnZXRCcmVhZHRoKSwgbm9kZS50YXJnZXRMaW5rcy5zb3J0KHRoaXMuX2FzY2VuZGluZ1NvdXJjZUJyZWFkdGgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5TYW5rZXlMYXlvdXQuZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgaXRlcmF0aW9uczogNixcbiAgICBub2RlQWxpZ246IFwianVzdGlmeVwiLFxuICAgIGRpcmVjdGlvbjogXCJob3Jpem9udGFsXCIsXG4gICAgbm9kZVdpZHRoOiAyNCxcbiAgICBub2RlR2FwOiA4LFxuICAgIGNyb3NzTm9kZUFsaWduOiBcIm1pZGRsZVwiLFxuICAgIGRyb3BJc29sYXRlZE5vZGU6ICEwXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGF5b3V0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/layout.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/sankey-highlight.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/sankey-highlight.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SankeyHighlight: () => (/* binding */ SankeyHighlight)\n/* harmony export */ });\n/* harmony import */ var _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vgrammar-core */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-core@0.14.13/node_modules/@visactor/vgrammar-core/es/interactions/base.js\");\n/* harmony import */ var _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vgrammar-core */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-core@0.14.13/node_modules/@visactor/vgrammar-core/es/graph/enums.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/array.js\");\n\n\n\n\nclass SankeyHighlight extends _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_0__.BaseInteraction {\n    constructor(view, options) {\n        var _a, _b;\n        super(view, options), this.type = SankeyHighlight.type, this.highlightAdjacentElement = (element, isNode) => {\n            var _a, _b;\n            const datum = element.getDatum(), allLinkElements = null !== (_b = null === (_a = this._linkMark) || void 0 === _a ? void 0 : _a.elements) && void 0 !== _b ? _b : [], highlightNodes = isNode ? [ datum.key ] : [ datum.source, datum.target ], getIsHighlight = isNode ? linkDatum => linkDatum.target === datum.key || linkDatum.source === datum.key : linkDatum => linkDatum.source === datum.source && linkDatum.target === datum.target;\n            return allLinkElements.forEach((linkEl => {\n                const linkDatum = linkEl.getDatum();\n                getIsHighlight(linkDatum) ? (linkEl.removeState(this.options.blurState), linkEl.addState(this.options.highlightState, {\n                    ratio: 1\n                }), highlightNodes.includes(linkDatum.source) || highlightNodes.push(linkDatum.source), \n                highlightNodes.includes(linkDatum.target) || highlightNodes.push(linkDatum.target)) : (linkEl.removeState(this.options.highlightState), \n                linkEl.addState(this.options.blurState));\n            })), highlightNodes;\n        }, this.highlightRelatedBySourceTarget = (element, isNode) => {\n            var _a, _b, _c, _d, _e, _f;\n            if (!isNode) return this.highlightAdjacentElement(element, isNode);\n            const datum = element.getDatum(), allNodeElements = null !== (_b = null === (_a = this._nodeMark) || void 0 === _a ? void 0 : _a.elements) && void 0 !== _b ? _b : [], highlightNodes = [], allLinkElements = null !== (_d = null === (_c = this._linkMark) || void 0 === _c ? void 0 : _c.elements) && void 0 !== _d ? _d : [], highlightLinks = [], allNodes = allNodeElements.reduce(((res, nodeEl) => {\n                const nodeDatum = nodeEl.getDatum();\n                return res[null == nodeDatum ? void 0 : nodeDatum.key] = {\n                    datum: nodeDatum,\n                    el: nodeEl\n                }, res;\n            }), {}), downNodes = [ datum ], upNodes = [ datum ];\n            for (;downNodes.length; ) {\n                const first = downNodes.pop();\n                (null === (_e = null == first ? void 0 : first.sourceLinks) || void 0 === _e ? void 0 : _e.length) && first.sourceLinks.forEach((link => {\n                    highlightLinks.push(link), allNodes[link.target] && downNodes.push(allNodes[link.target].datum);\n                }));\n            }\n            for (;upNodes.length; ) {\n                const first = upNodes.pop();\n                (null === (_f = null == first ? void 0 : first.targetLinks) || void 0 === _f ? void 0 : _f.length) && first.targetLinks.forEach((link => {\n                    highlightLinks.push(link), allNodes[link.source] && upNodes.push(allNodes[link.source].datum);\n                }));\n            }\n            return allLinkElements.forEach((linkEl => {\n                const linkDatum = linkEl.getDatum();\n                highlightLinks.some((link => link.source === linkDatum.source && link.target === linkDatum.target)) ? (linkEl.removeState(this.options.blurState), \n                linkEl.addState(this.options.highlightState, {\n                    ratio: 1\n                }), highlightNodes.includes(linkDatum.source) || highlightNodes.push(linkDatum.source), \n                highlightNodes.includes(linkDatum.target) || highlightNodes.push(linkDatum.target)) : (linkEl.removeState(this.options.highlightState), \n                linkEl.addState(this.options.blurState));\n            })), highlightNodes;\n        }, this.highlightRelatedElement = (element, isNode) => {\n            var _a, _b, _c, _d, _e;\n            const allLinkElements = null !== (_b = null === (_a = this._linkMark) || void 0 === _a ? void 0 : _a.elements) && void 0 !== _b ? _b : [];\n            if (!!!(null === (_e = null === (_d = null === (_c = allLinkElements[0]) || void 0 === _c ? void 0 : _c.getDatum) || void 0 === _d ? void 0 : _d.call(_c)) || void 0 === _e ? void 0 : _e.parents)) return this.highlightRelatedBySourceTarget(element, isNode);\n            const datum = element.getDatum(), highlightNodes = isNode ? [ datum.key ] : [ datum.source, datum.target ], upstreamLinks = this.parseUpstreamLinks(element, isNode);\n            return allLinkElements.forEach((linkEl => {\n                const linkDatum = linkEl.getDatum(), originalDatum = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__.array)(linkDatum.datum);\n                if (!isNode && linkDatum.source === datum.source && linkDatum.target === datum.target) return linkEl.removeState(this.options.blurState), \n                void linkEl.addState(this.options.highlightState, {\n                    ratio: 1\n                });\n                const selectedDatum = isNode ? originalDatum.filter((entry => {\n                    var _a;\n                    return (null !== (_a = entry.parents) && void 0 !== _a ? _a : []).some((par => par.key === datum.key));\n                })) : originalDatum.filter((entry => {\n                    var _a;\n                    return (null !== (_a = entry.parents) && void 0 !== _a ? _a : []).some((par => par.key === datum.target));\n                }));\n                if (selectedDatum && selectedDatum.length) {\n                    highlightNodes.includes(linkDatum.source) || highlightNodes.push(linkDatum.source), \n                    highlightNodes.includes(linkDatum.target) || highlightNodes.push(linkDatum.target);\n                    const ratio = selectedDatum.reduce(((sum, d) => sum + d.value), 0) / linkDatum.value;\n                    return linkEl.removeState(this.options.blurState), void linkEl.addState(this.options.highlightState, {\n                        ratio: ratio\n                    });\n                }\n                const upSelectedLink = upstreamLinks.find((upLink => upLink.source === linkDatum.source && upLink.target === linkDatum.target));\n                if (upSelectedLink) return highlightNodes.includes(linkDatum.source) || highlightNodes.push(linkDatum.source), \n                highlightNodes.includes(linkDatum.target) || highlightNodes.push(linkDatum.target), \n                linkEl.removeState(this.options.blurState), void linkEl.addState(this.options.highlightState, {\n                    ratio: upSelectedLink.value / linkDatum.value\n                });\n                linkEl.removeState(this.options.highlightState), linkEl.addState(this.options.blurState);\n            })), highlightNodes;\n        }, this.highlightElement = (element, isNode) => {\n            var _a, _b;\n            const allNodeElements = null !== (_b = null === (_a = this._nodeMark) || void 0 === _a ? void 0 : _a.elements) && void 0 !== _b ? _b : [], highlightNodes = \"related\" === this.options.effect ? this.highlightRelatedElement(element, isNode) : this.highlightAdjacentElement(element, isNode);\n            allNodeElements.forEach((el => {\n                highlightNodes.includes(el.getDatum().key) ? (el.removeState(this.options.blurState), \n                el.addState(this.options.highlightState)) : (el.removeState(this.options.highlightState), \n                el.addState(this.options.blurState));\n            }));\n        }, this.handleStart = e => {\n            e.element && (e.element.mark === this._nodeMark ? (this._activeElement = e.element, \n            this.highlightElement(e.element, !0)) : e.element.mark === this._linkMark && (this._activeElement = e.element, \n            this.highlightElement(e.element, !1)));\n        }, this.handleReset = e => {\n            e.element && e.element === this._activeElement && this.clearPrevElements();\n        }, this.options = Object.assign({}, SankeyHighlight.defaultOptions, options), this._nodeMark = null === (_a = view.getMarksBySelector(this.options.nodeSelector)) || void 0 === _a ? void 0 : _a[0], \n        this._linkMark = null === (_b = view.getMarksBySelector(this.options.linkSelector)) || void 0 === _b ? void 0 : _b[0];\n    }\n    getEvents() {\n        return [ {\n            type: this.options.trigger,\n            handler: this.handleStart\n        }, {\n            type: this.options.triggerOff,\n            handler: this.handleReset\n        } ];\n    }\n    clearPrevElements() {\n        [ this._linkMark, this._nodeMark ].forEach((mark => {\n            mark && mark.elements.forEach((el => {\n                el.hasState(this.options.highlightState) && el.removeState(this.options.highlightState), \n                el.hasState(this.options.blurState) && el.removeState(this.options.blurState);\n            }));\n        }));\n    }\n    parseUpstreamLinks(element, isNode) {\n        const datum = element.getDatum();\n        return (isNode ? datum.targetLinks : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__.array)(datum)).reduce(((res, link) => ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__.array)(link.datum).forEach((dividedLink => {\n            var _a;\n            const parents = null !== (_a = dividedLink.parents) && void 0 !== _a ? _a : [ {\n                key: dividedLink.source\n            } ], len = isNode ? parents.length : parents.length - 1;\n            for (let i = 0; i < len; i++) {\n                const source = parents[i].key, target = parents[i + 1] ? parents[i + 1].key : datum.key, value = dividedLink.value, existingItem = res.find((item => item.source === source && item.target === target));\n                existingItem ? existingItem.value += value : res.push({\n                    source: source,\n                    target: target,\n                    value: value\n                });\n            }\n        })), res)), []);\n    }\n}\n\nSankeyHighlight.type = \"sankey-highlight\", SankeyHighlight.defaultOptions = {\n    highlightState: _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_2__.InteractionStateEnum.highlight,\n    blurState: _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_2__.InteractionStateEnum.blur,\n    trigger: \"pointerover\",\n    triggerOff: \"pointerout\",\n    effect: \"related\"\n};\n//# sourceMappingURL=sankey-highlight.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL3NhbmtleS1oaWdobGlnaHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnRjs7QUFFdkM7O0FBRWxDLDhCQUE4QixvRUFBZTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYSxLQUFLO0FBQ2xCLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0Esa0JBQWtCLGdCQUFnQjtBQUNsQztBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsdURBQUs7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUyxpQ0FBaUM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsdURBQUssaUNBQWlDLHVEQUFLO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCw0QkFBNEIsU0FBUztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0IseUVBQW9CO0FBQ3hDLGVBQWUseUVBQW9CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXNhY3Rvci1uZXh0LXRlbXBsYXRlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B2aXNhY3Rvcit2Z3JhbW1hci1zYW5rZXlAMC4xNC4xMy9ub2RlX21vZHVsZXMvQHZpc2FjdG9yL3ZncmFtbWFyLXNhbmtleS9lcy9zYW5rZXktaGlnaGxpZ2h0LmpzPzU2MTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW50ZXJhY3Rpb25TdGF0ZUVudW0sIEJhc2VJbnRlcmFjdGlvbiB9IGZyb20gXCJAdmlzYWN0b3IvdmdyYW1tYXItY29yZVwiO1xuXG5pbXBvcnQgeyBhcnJheSB9IGZyb20gXCJAdmlzYWN0b3IvdnV0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBTYW5rZXlIaWdobGlnaHQgZXh0ZW5kcyBCYXNlSW50ZXJhY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgc3VwZXIodmlldywgb3B0aW9ucyksIHRoaXMudHlwZSA9IFNhbmtleUhpZ2hsaWdodC50eXBlLCB0aGlzLmhpZ2hsaWdodEFkamFjZW50RWxlbWVudCA9IChlbGVtZW50LCBpc05vZGUpID0+IHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICBjb25zdCBkYXR1bSA9IGVsZW1lbnQuZ2V0RGF0dW0oKSwgYWxsTGlua0VsZW1lbnRzID0gbnVsbCAhPT0gKF9iID0gbnVsbCA9PT0gKF9hID0gdGhpcy5fbGlua01hcmspIHx8IHZvaWQgMCA9PT0gX2EgPyB2b2lkIDAgOiBfYS5lbGVtZW50cykgJiYgdm9pZCAwICE9PSBfYiA/IF9iIDogW10sIGhpZ2hsaWdodE5vZGVzID0gaXNOb2RlID8gWyBkYXR1bS5rZXkgXSA6IFsgZGF0dW0uc291cmNlLCBkYXR1bS50YXJnZXQgXSwgZ2V0SXNIaWdobGlnaHQgPSBpc05vZGUgPyBsaW5rRGF0dW0gPT4gbGlua0RhdHVtLnRhcmdldCA9PT0gZGF0dW0ua2V5IHx8IGxpbmtEYXR1bS5zb3VyY2UgPT09IGRhdHVtLmtleSA6IGxpbmtEYXR1bSA9PiBsaW5rRGF0dW0uc291cmNlID09PSBkYXR1bS5zb3VyY2UgJiYgbGlua0RhdHVtLnRhcmdldCA9PT0gZGF0dW0udGFyZ2V0O1xuICAgICAgICAgICAgcmV0dXJuIGFsbExpbmtFbGVtZW50cy5mb3JFYWNoKChsaW5rRWwgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtEYXR1bSA9IGxpbmtFbC5nZXREYXR1bSgpO1xuICAgICAgICAgICAgICAgIGdldElzSGlnaGxpZ2h0KGxpbmtEYXR1bSkgPyAobGlua0VsLnJlbW92ZVN0YXRlKHRoaXMub3B0aW9ucy5ibHVyU3RhdGUpLCBsaW5rRWwuYWRkU3RhdGUodGhpcy5vcHRpb25zLmhpZ2hsaWdodFN0YXRlLCB7XG4gICAgICAgICAgICAgICAgICAgIHJhdGlvOiAxXG4gICAgICAgICAgICAgICAgfSksIGhpZ2hsaWdodE5vZGVzLmluY2x1ZGVzKGxpbmtEYXR1bS5zb3VyY2UpIHx8IGhpZ2hsaWdodE5vZGVzLnB1c2gobGlua0RhdHVtLnNvdXJjZSksIFxuICAgICAgICAgICAgICAgIGhpZ2hsaWdodE5vZGVzLmluY2x1ZGVzKGxpbmtEYXR1bS50YXJnZXQpIHx8IGhpZ2hsaWdodE5vZGVzLnB1c2gobGlua0RhdHVtLnRhcmdldCkpIDogKGxpbmtFbC5yZW1vdmVTdGF0ZSh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0U3RhdGUpLCBcbiAgICAgICAgICAgICAgICBsaW5rRWwuYWRkU3RhdGUodGhpcy5vcHRpb25zLmJsdXJTdGF0ZSkpO1xuICAgICAgICAgICAgfSkpLCBoaWdobGlnaHROb2RlcztcbiAgICAgICAgfSwgdGhpcy5oaWdobGlnaHRSZWxhdGVkQnlTb3VyY2VUYXJnZXQgPSAoZWxlbWVudCwgaXNOb2RlKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICAgICAgICAgIGlmICghaXNOb2RlKSByZXR1cm4gdGhpcy5oaWdobGlnaHRBZGphY2VudEVsZW1lbnQoZWxlbWVudCwgaXNOb2RlKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdHVtID0gZWxlbWVudC5nZXREYXR1bSgpLCBhbGxOb2RlRWxlbWVudHMgPSBudWxsICE9PSAoX2IgPSBudWxsID09PSAoX2EgPSB0aGlzLl9ub2RlTWFyaykgfHwgdm9pZCAwID09PSBfYSA/IHZvaWQgMCA6IF9hLmVsZW1lbnRzKSAmJiB2b2lkIDAgIT09IF9iID8gX2IgOiBbXSwgaGlnaGxpZ2h0Tm9kZXMgPSBbXSwgYWxsTGlua0VsZW1lbnRzID0gbnVsbCAhPT0gKF9kID0gbnVsbCA9PT0gKF9jID0gdGhpcy5fbGlua01hcmspIHx8IHZvaWQgMCA9PT0gX2MgPyB2b2lkIDAgOiBfYy5lbGVtZW50cykgJiYgdm9pZCAwICE9PSBfZCA/IF9kIDogW10sIGhpZ2hsaWdodExpbmtzID0gW10sIGFsbE5vZGVzID0gYWxsTm9kZUVsZW1lbnRzLnJlZHVjZSgoKHJlcywgbm9kZUVsKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZURhdHVtID0gbm9kZUVsLmdldERhdHVtKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc1tudWxsID09IG5vZGVEYXR1bSA/IHZvaWQgMCA6IG5vZGVEYXR1bS5rZXldID0ge1xuICAgICAgICAgICAgICAgICAgICBkYXR1bTogbm9kZURhdHVtLFxuICAgICAgICAgICAgICAgICAgICBlbDogbm9kZUVsXG4gICAgICAgICAgICAgICAgfSwgcmVzO1xuICAgICAgICAgICAgfSksIHt9KSwgZG93bk5vZGVzID0gWyBkYXR1bSBdLCB1cE5vZGVzID0gWyBkYXR1bSBdO1xuICAgICAgICAgICAgZm9yICg7ZG93bk5vZGVzLmxlbmd0aDsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3QgPSBkb3duTm9kZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgKG51bGwgPT09IChfZSA9IG51bGwgPT0gZmlyc3QgPyB2b2lkIDAgOiBmaXJzdC5zb3VyY2VMaW5rcykgfHwgdm9pZCAwID09PSBfZSA/IHZvaWQgMCA6IF9lLmxlbmd0aCkgJiYgZmlyc3Quc291cmNlTGlua3MuZm9yRWFjaCgobGluayA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodExpbmtzLnB1c2gobGluayksIGFsbE5vZGVzW2xpbmsudGFyZ2V0XSAmJiBkb3duTm9kZXMucHVzaChhbGxOb2Rlc1tsaW5rLnRhcmdldF0uZGF0dW0pO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoO3VwTm9kZXMubGVuZ3RoOyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdCA9IHVwTm9kZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgKG51bGwgPT09IChfZiA9IG51bGwgPT0gZmlyc3QgPyB2b2lkIDAgOiBmaXJzdC50YXJnZXRMaW5rcykgfHwgdm9pZCAwID09PSBfZiA/IHZvaWQgMCA6IF9mLmxlbmd0aCkgJiYgZmlyc3QudGFyZ2V0TGlua3MuZm9yRWFjaCgobGluayA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodExpbmtzLnB1c2gobGluayksIGFsbE5vZGVzW2xpbmsuc291cmNlXSAmJiB1cE5vZGVzLnB1c2goYWxsTm9kZXNbbGluay5zb3VyY2VdLmRhdHVtKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWxsTGlua0VsZW1lbnRzLmZvckVhY2goKGxpbmtFbCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlua0RhdHVtID0gbGlua0VsLmdldERhdHVtKCk7XG4gICAgICAgICAgICAgICAgaGlnaGxpZ2h0TGlua3Muc29tZSgobGluayA9PiBsaW5rLnNvdXJjZSA9PT0gbGlua0RhdHVtLnNvdXJjZSAmJiBsaW5rLnRhcmdldCA9PT0gbGlua0RhdHVtLnRhcmdldCkpID8gKGxpbmtFbC5yZW1vdmVTdGF0ZSh0aGlzLm9wdGlvbnMuYmx1clN0YXRlKSwgXG4gICAgICAgICAgICAgICAgbGlua0VsLmFkZFN0YXRlKHRoaXMub3B0aW9ucy5oaWdobGlnaHRTdGF0ZSwge1xuICAgICAgICAgICAgICAgICAgICByYXRpbzogMVxuICAgICAgICAgICAgICAgIH0pLCBoaWdobGlnaHROb2Rlcy5pbmNsdWRlcyhsaW5rRGF0dW0uc291cmNlKSB8fCBoaWdobGlnaHROb2Rlcy5wdXNoKGxpbmtEYXR1bS5zb3VyY2UpLCBcbiAgICAgICAgICAgICAgICBoaWdobGlnaHROb2Rlcy5pbmNsdWRlcyhsaW5rRGF0dW0udGFyZ2V0KSB8fCBoaWdobGlnaHROb2Rlcy5wdXNoKGxpbmtEYXR1bS50YXJnZXQpKSA6IChsaW5rRWwucmVtb3ZlU3RhdGUodGhpcy5vcHRpb25zLmhpZ2hsaWdodFN0YXRlKSwgXG4gICAgICAgICAgICAgICAgbGlua0VsLmFkZFN0YXRlKHRoaXMub3B0aW9ucy5ibHVyU3RhdGUpKTtcbiAgICAgICAgICAgIH0pKSwgaGlnaGxpZ2h0Tm9kZXM7XG4gICAgICAgIH0sIHRoaXMuaGlnaGxpZ2h0UmVsYXRlZEVsZW1lbnQgPSAoZWxlbWVudCwgaXNOb2RlKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgICAgICAgICAgY29uc3QgYWxsTGlua0VsZW1lbnRzID0gbnVsbCAhPT0gKF9iID0gbnVsbCA9PT0gKF9hID0gdGhpcy5fbGlua01hcmspIHx8IHZvaWQgMCA9PT0gX2EgPyB2b2lkIDAgOiBfYS5lbGVtZW50cykgJiYgdm9pZCAwICE9PSBfYiA/IF9iIDogW107XG4gICAgICAgICAgICBpZiAoISEhKG51bGwgPT09IChfZSA9IG51bGwgPT09IChfZCA9IG51bGwgPT09IChfYyA9IGFsbExpbmtFbGVtZW50c1swXSkgfHwgdm9pZCAwID09PSBfYyA/IHZvaWQgMCA6IF9jLmdldERhdHVtKSB8fCB2b2lkIDAgPT09IF9kID8gdm9pZCAwIDogX2QuY2FsbChfYykpIHx8IHZvaWQgMCA9PT0gX2UgPyB2b2lkIDAgOiBfZS5wYXJlbnRzKSkgcmV0dXJuIHRoaXMuaGlnaGxpZ2h0UmVsYXRlZEJ5U291cmNlVGFyZ2V0KGVsZW1lbnQsIGlzTm9kZSk7XG4gICAgICAgICAgICBjb25zdCBkYXR1bSA9IGVsZW1lbnQuZ2V0RGF0dW0oKSwgaGlnaGxpZ2h0Tm9kZXMgPSBpc05vZGUgPyBbIGRhdHVtLmtleSBdIDogWyBkYXR1bS5zb3VyY2UsIGRhdHVtLnRhcmdldCBdLCB1cHN0cmVhbUxpbmtzID0gdGhpcy5wYXJzZVVwc3RyZWFtTGlua3MoZWxlbWVudCwgaXNOb2RlKTtcbiAgICAgICAgICAgIHJldHVybiBhbGxMaW5rRWxlbWVudHMuZm9yRWFjaCgobGlua0VsID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rRGF0dW0gPSBsaW5rRWwuZ2V0RGF0dW0oKSwgb3JpZ2luYWxEYXR1bSA9IGFycmF5KGxpbmtEYXR1bS5kYXR1bSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc05vZGUgJiYgbGlua0RhdHVtLnNvdXJjZSA9PT0gZGF0dW0uc291cmNlICYmIGxpbmtEYXR1bS50YXJnZXQgPT09IGRhdHVtLnRhcmdldCkgcmV0dXJuIGxpbmtFbC5yZW1vdmVTdGF0ZSh0aGlzLm9wdGlvbnMuYmx1clN0YXRlKSwgXG4gICAgICAgICAgICAgICAgdm9pZCBsaW5rRWwuYWRkU3RhdGUodGhpcy5vcHRpb25zLmhpZ2hsaWdodFN0YXRlLCB7XG4gICAgICAgICAgICAgICAgICAgIHJhdGlvOiAxXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWREYXR1bSA9IGlzTm9kZSA/IG9yaWdpbmFsRGF0dW0uZmlsdGVyKChlbnRyeSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChudWxsICE9PSAoX2EgPSBlbnRyeS5wYXJlbnRzKSAmJiB2b2lkIDAgIT09IF9hID8gX2EgOiBbXSkuc29tZSgocGFyID0+IHBhci5rZXkgPT09IGRhdHVtLmtleSkpO1xuICAgICAgICAgICAgICAgIH0pKSA6IG9yaWdpbmFsRGF0dW0uZmlsdGVyKChlbnRyeSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChudWxsICE9PSAoX2EgPSBlbnRyeS5wYXJlbnRzKSAmJiB2b2lkIDAgIT09IF9hID8gX2EgOiBbXSkuc29tZSgocGFyID0+IHBhci5rZXkgPT09IGRhdHVtLnRhcmdldCkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXR1bSAmJiBzZWxlY3RlZERhdHVtLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHROb2Rlcy5pbmNsdWRlcyhsaW5rRGF0dW0uc291cmNlKSB8fCBoaWdobGlnaHROb2Rlcy5wdXNoKGxpbmtEYXR1bS5zb3VyY2UpLCBcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0Tm9kZXMuaW5jbHVkZXMobGlua0RhdHVtLnRhcmdldCkgfHwgaGlnaGxpZ2h0Tm9kZXMucHVzaChsaW5rRGF0dW0udGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF0aW8gPSBzZWxlY3RlZERhdHVtLnJlZHVjZSgoKHN1bSwgZCkgPT4gc3VtICsgZC52YWx1ZSksIDApIC8gbGlua0RhdHVtLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGlua0VsLnJlbW92ZVN0YXRlKHRoaXMub3B0aW9ucy5ibHVyU3RhdGUpLCB2b2lkIGxpbmtFbC5hZGRTdGF0ZSh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0U3RhdGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhdGlvOiByYXRpb1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdXBTZWxlY3RlZExpbmsgPSB1cHN0cmVhbUxpbmtzLmZpbmQoKHVwTGluayA9PiB1cExpbmsuc291cmNlID09PSBsaW5rRGF0dW0uc291cmNlICYmIHVwTGluay50YXJnZXQgPT09IGxpbmtEYXR1bS50YXJnZXQpKTtcbiAgICAgICAgICAgICAgICBpZiAodXBTZWxlY3RlZExpbmspIHJldHVybiBoaWdobGlnaHROb2Rlcy5pbmNsdWRlcyhsaW5rRGF0dW0uc291cmNlKSB8fCBoaWdobGlnaHROb2Rlcy5wdXNoKGxpbmtEYXR1bS5zb3VyY2UpLCBcbiAgICAgICAgICAgICAgICBoaWdobGlnaHROb2Rlcy5pbmNsdWRlcyhsaW5rRGF0dW0udGFyZ2V0KSB8fCBoaWdobGlnaHROb2Rlcy5wdXNoKGxpbmtEYXR1bS50YXJnZXQpLCBcbiAgICAgICAgICAgICAgICBsaW5rRWwucmVtb3ZlU3RhdGUodGhpcy5vcHRpb25zLmJsdXJTdGF0ZSksIHZvaWQgbGlua0VsLmFkZFN0YXRlKHRoaXMub3B0aW9ucy5oaWdobGlnaHRTdGF0ZSwge1xuICAgICAgICAgICAgICAgICAgICByYXRpbzogdXBTZWxlY3RlZExpbmsudmFsdWUgLyBsaW5rRGF0dW0udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsaW5rRWwucmVtb3ZlU3RhdGUodGhpcy5vcHRpb25zLmhpZ2hsaWdodFN0YXRlKSwgbGlua0VsLmFkZFN0YXRlKHRoaXMub3B0aW9ucy5ibHVyU3RhdGUpO1xuICAgICAgICAgICAgfSkpLCBoaWdobGlnaHROb2RlcztcbiAgICAgICAgfSwgdGhpcy5oaWdobGlnaHRFbGVtZW50ID0gKGVsZW1lbnQsIGlzTm9kZSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIGNvbnN0IGFsbE5vZGVFbGVtZW50cyA9IG51bGwgIT09IChfYiA9IG51bGwgPT09IChfYSA9IHRoaXMuX25vZGVNYXJrKSB8fCB2b2lkIDAgPT09IF9hID8gdm9pZCAwIDogX2EuZWxlbWVudHMpICYmIHZvaWQgMCAhPT0gX2IgPyBfYiA6IFtdLCBoaWdobGlnaHROb2RlcyA9IFwicmVsYXRlZFwiID09PSB0aGlzLm9wdGlvbnMuZWZmZWN0ID8gdGhpcy5oaWdobGlnaHRSZWxhdGVkRWxlbWVudChlbGVtZW50LCBpc05vZGUpIDogdGhpcy5oaWdobGlnaHRBZGphY2VudEVsZW1lbnQoZWxlbWVudCwgaXNOb2RlKTtcbiAgICAgICAgICAgIGFsbE5vZGVFbGVtZW50cy5mb3JFYWNoKChlbCA9PiB7XG4gICAgICAgICAgICAgICAgaGlnaGxpZ2h0Tm9kZXMuaW5jbHVkZXMoZWwuZ2V0RGF0dW0oKS5rZXkpID8gKGVsLnJlbW92ZVN0YXRlKHRoaXMub3B0aW9ucy5ibHVyU3RhdGUpLCBcbiAgICAgICAgICAgICAgICBlbC5hZGRTdGF0ZSh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0U3RhdGUpKSA6IChlbC5yZW1vdmVTdGF0ZSh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0U3RhdGUpLCBcbiAgICAgICAgICAgICAgICBlbC5hZGRTdGF0ZSh0aGlzLm9wdGlvbnMuYmx1clN0YXRlKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0sIHRoaXMuaGFuZGxlU3RhcnQgPSBlID0+IHtcbiAgICAgICAgICAgIGUuZWxlbWVudCAmJiAoZS5lbGVtZW50Lm1hcmsgPT09IHRoaXMuX25vZGVNYXJrID8gKHRoaXMuX2FjdGl2ZUVsZW1lbnQgPSBlLmVsZW1lbnQsIFxuICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRFbGVtZW50KGUuZWxlbWVudCwgITApKSA6IGUuZWxlbWVudC5tYXJrID09PSB0aGlzLl9saW5rTWFyayAmJiAodGhpcy5fYWN0aXZlRWxlbWVudCA9IGUuZWxlbWVudCwgXG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodEVsZW1lbnQoZS5lbGVtZW50LCAhMSkpKTtcbiAgICAgICAgfSwgdGhpcy5oYW5kbGVSZXNldCA9IGUgPT4ge1xuICAgICAgICAgICAgZS5lbGVtZW50ICYmIGUuZWxlbWVudCA9PT0gdGhpcy5fYWN0aXZlRWxlbWVudCAmJiB0aGlzLmNsZWFyUHJldkVsZW1lbnRzKCk7XG4gICAgICAgIH0sIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIFNhbmtleUhpZ2hsaWdodC5kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyksIHRoaXMuX25vZGVNYXJrID0gbnVsbCA9PT0gKF9hID0gdmlldy5nZXRNYXJrc0J5U2VsZWN0b3IodGhpcy5vcHRpb25zLm5vZGVTZWxlY3RvcikpIHx8IHZvaWQgMCA9PT0gX2EgPyB2b2lkIDAgOiBfYVswXSwgXG4gICAgICAgIHRoaXMuX2xpbmtNYXJrID0gbnVsbCA9PT0gKF9iID0gdmlldy5nZXRNYXJrc0J5U2VsZWN0b3IodGhpcy5vcHRpb25zLmxpbmtTZWxlY3RvcikpIHx8IHZvaWQgMCA9PT0gX2IgPyB2b2lkIDAgOiBfYlswXTtcbiAgICB9XG4gICAgZ2V0RXZlbnRzKCkge1xuICAgICAgICByZXR1cm4gWyB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLm9wdGlvbnMudHJpZ2dlcixcbiAgICAgICAgICAgIGhhbmRsZXI6IHRoaXMuaGFuZGxlU3RhcnRcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdHlwZTogdGhpcy5vcHRpb25zLnRyaWdnZXJPZmYsXG4gICAgICAgICAgICBoYW5kbGVyOiB0aGlzLmhhbmRsZVJlc2V0XG4gICAgICAgIH0gXTtcbiAgICB9XG4gICAgY2xlYXJQcmV2RWxlbWVudHMoKSB7XG4gICAgICAgIFsgdGhpcy5fbGlua01hcmssIHRoaXMuX25vZGVNYXJrIF0uZm9yRWFjaCgobWFyayA9PiB7XG4gICAgICAgICAgICBtYXJrICYmIG1hcmsuZWxlbWVudHMuZm9yRWFjaCgoZWwgPT4ge1xuICAgICAgICAgICAgICAgIGVsLmhhc1N0YXRlKHRoaXMub3B0aW9ucy5oaWdobGlnaHRTdGF0ZSkgJiYgZWwucmVtb3ZlU3RhdGUodGhpcy5vcHRpb25zLmhpZ2hsaWdodFN0YXRlKSwgXG4gICAgICAgICAgICAgICAgZWwuaGFzU3RhdGUodGhpcy5vcHRpb25zLmJsdXJTdGF0ZSkgJiYgZWwucmVtb3ZlU3RhdGUodGhpcy5vcHRpb25zLmJsdXJTdGF0ZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcGFyc2VVcHN0cmVhbUxpbmtzKGVsZW1lbnQsIGlzTm9kZSkge1xuICAgICAgICBjb25zdCBkYXR1bSA9IGVsZW1lbnQuZ2V0RGF0dW0oKTtcbiAgICAgICAgcmV0dXJuIChpc05vZGUgPyBkYXR1bS50YXJnZXRMaW5rcyA6IGFycmF5KGRhdHVtKSkucmVkdWNlKCgocmVzLCBsaW5rKSA9PiAoYXJyYXkobGluay5kYXR1bSkuZm9yRWFjaCgoZGl2aWRlZExpbmsgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50cyA9IG51bGwgIT09IChfYSA9IGRpdmlkZWRMaW5rLnBhcmVudHMpICYmIHZvaWQgMCAhPT0gX2EgPyBfYSA6IFsge1xuICAgICAgICAgICAgICAgIGtleTogZGl2aWRlZExpbmsuc291cmNlXG4gICAgICAgICAgICB9IF0sIGxlbiA9IGlzTm9kZSA/IHBhcmVudHMubGVuZ3RoIDogcGFyZW50cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IHBhcmVudHNbaV0ua2V5LCB0YXJnZXQgPSBwYXJlbnRzW2kgKyAxXSA/IHBhcmVudHNbaSArIDFdLmtleSA6IGRhdHVtLmtleSwgdmFsdWUgPSBkaXZpZGVkTGluay52YWx1ZSwgZXhpc3RpbmdJdGVtID0gcmVzLmZpbmQoKGl0ZW0gPT4gaXRlbS5zb3VyY2UgPT09IHNvdXJjZSAmJiBpdGVtLnRhcmdldCA9PT0gdGFyZ2V0KSk7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdJdGVtID8gZXhpc3RpbmdJdGVtLnZhbHVlICs9IHZhbHVlIDogcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHJlcykpLCBbXSk7XG4gICAgfVxufVxuXG5TYW5rZXlIaWdobGlnaHQudHlwZSA9IFwic2Fua2V5LWhpZ2hsaWdodFwiLCBTYW5rZXlIaWdobGlnaHQuZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgaGlnaGxpZ2h0U3RhdGU6IEludGVyYWN0aW9uU3RhdGVFbnVtLmhpZ2hsaWdodCxcbiAgICBibHVyU3RhdGU6IEludGVyYWN0aW9uU3RhdGVFbnVtLmJsdXIsXG4gICAgdHJpZ2dlcjogXCJwb2ludGVyb3ZlclwiLFxuICAgIHRyaWdnZXJPZmY6IFwicG9pbnRlcm91dFwiLFxuICAgIGVmZmVjdDogXCJyZWxhdGVkXCJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYW5rZXktaGlnaGxpZ2h0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/sankey-highlight.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/transform.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/transform.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   transform: () => (/* binding */ transform)\n/* harmony export */ });\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/layout.js\");\n\n\nconst transform = (options, upstreamData) => {\n    const res = new _layout__WEBPACK_IMPORTED_MODULE_0__.SankeyLayout(options).layout(Array.isArray(upstreamData) ? upstreamData[0] : upstreamData, \"width\" in options ? {\n        width: options.width,\n        height: options.height\n    } : {\n        x0: options.x0,\n        x1: options.x1,\n        y0: options.y0,\n        y1: options.y1\n    });\n    return res ? [ res ] : [];\n};\n//# sourceMappingURL=transform.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL3RyYW5zZm9ybS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3Qzs7QUFFakM7QUFDUCxvQkFBb0IsaURBQVk7QUFDaEM7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXNhY3Rvci1uZXh0LXRlbXBsYXRlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B2aXNhY3Rvcit2Z3JhbW1hci1zYW5rZXlAMC4xNC4xMy9ub2RlX21vZHVsZXMvQHZpc2FjdG9yL3ZncmFtbWFyLXNhbmtleS9lcy90cmFuc2Zvcm0uanM/NGVmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTYW5rZXlMYXlvdXQgfSBmcm9tIFwiLi9sYXlvdXRcIjtcblxuZXhwb3J0IGNvbnN0IHRyYW5zZm9ybSA9IChvcHRpb25zLCB1cHN0cmVhbURhdGEpID0+IHtcbiAgICBjb25zdCByZXMgPSBuZXcgU2Fua2V5TGF5b3V0KG9wdGlvbnMpLmxheW91dChBcnJheS5pc0FycmF5KHVwc3RyZWFtRGF0YSkgPyB1cHN0cmVhbURhdGFbMF0gOiB1cHN0cmVhbURhdGEsIFwid2lkdGhcIiBpbiBvcHRpb25zID8ge1xuICAgICAgICB3aWR0aDogb3B0aW9ucy53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBvcHRpb25zLmhlaWdodFxuICAgIH0gOiB7XG4gICAgICAgIHgwOiBvcHRpb25zLngwLFxuICAgICAgICB4MTogb3B0aW9ucy54MSxcbiAgICAgICAgeTA6IG9wdGlvbnMueTAsXG4gICAgICAgIHkxOiBvcHRpb25zLnkxXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcyA/IFsgcmVzIF0gOiBbXTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm0uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/transform.js\n");

/***/ })

};
;